{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/lib/auth-client.ts"],"sourcesContent":["import { createAuthClient } from \"better-auth/react\";\nimport { convexClient } from \"@convex-dev/better-auth/client/plugins\";\n\nexport const authClient = createAuthClient({\n  plugins: [convexClient()],\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEO,MAAM,aAAa,IAAA,sZAAgB,EAAC;IACzC,SAAS;QAAC,IAAA,2ZAAY;KAAG;AAC3B"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/components/app-sidebar.tsx"],"sourcesContent":["import { Plus, MessageSquare, AudioWaveform } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface Thread {\n  id: string;\n  title: string;\n  createdAt: string;\n}\n\ninterface AppSidebarProps {\n  threads: Thread[];\n  activeThreadId: string | null;\n  onSelectThread: (id: string) => void;\n  onNewChat: () => void;\n  className?: string; // Added className prop\n}\n\nexport function AppSidebar({\n  threads,\n  activeThreadId,\n  onSelectThread,\n  onNewChat,\n  className, // Destructure className\n}: AppSidebarProps) {\n  return (\n    <aside\n      className={cn( // Apply className here\n        \"w-[260px] h-screen bg-sidebar text-sidebar-foreground border-r border-sidebar-border flex flex-col shrink-0 transition-all duration-300\",\n        className,\n      )}>\n      {/* Header / New Chat */}\n      <div className=\"p-4\">\n        <button\n          onClick={onNewChat}\n          className=\"w-full flex items-center gap-2 bg-sidebar-primary text-sidebar-primary-foreground hover:bg-sidebar-primary/90 px-4 py-3 rounded-lg transition-all shadow-sm font-medium\"\n        >\n          <Plus size={18} />\n          <span>New Analysis</span>\n        </button>\n      </div>\n\n      {/* Thread List */}\n      <div className=\"flex-1 overflow-y-auto px-2 py-2 space-y-1 scrollbar-thin scrollbar-thumb-sidebar-accent\">\n        <div className=\"px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider\">\n          History\n        </div>\n\n        {threads.length === 0 && (\n          <div className=\"text-sm text-muted-foreground px-4 py-4 text-center italic\">\n            No history yet.\n          </div>\n        )}\n\n        {threads.map((thread) => (\n          <button\n            key={thread.id}\n            onClick={() => onSelectThread(thread.id)}\n            className={cn(\n              \"w-full text-left px-3 py-3 rounded-md text-sm truncate flex items-center gap-3 transition-all border border-transparent\",\n              activeThreadId === thread.id\n                ? \"bg-sidebar-accent text-sidebar-accent-foreground border-sidebar-border shadow-sm font-medium\"\n                : \"text-muted-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-foreground\",\n            )}\n          >\n            <div className=\"bg-background/50 p-1.5 rounded-md border border-sidebar-border/50\">\n              <AudioWaveform size={14} className=\"opacity-70\" />\n            </div>\n            <span className=\"truncate\">{thread.title}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* User Footer (Optional) */}\n      <div className=\"p-4 border-t border-sidebar-border bg-sidebar/50\">\n        <div className=\"flex items-center gap-3 text-sm font-medium text-sidebar-foreground/80\">\n          <div className=\"size-8 rounded-full bg-gradient-to-tr from-sidebar-primary to-purple-400\"></div>\n          <div>User Account</div>\n        </div>\n      </div>\n    </aside>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAgBO,SAAS,WAAW,EACzB,OAAO,EACP,cAAc,EACd,cAAc,EACd,SAAS,EACT,SAAS,EACO;IAChB,qBACE,sYAAC;QACC,WAAW,IAAA,qHAAE,EACX,2IACA;;0BAGF,sYAAC;gBAAI,WAAU;0BACb,cAAA,sYAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,sYAAC,iSAAI;4BAAC,MAAM;;;;;;sCACZ,sYAAC;sCAAK;;;;;;;;;;;;;;;;;0BAKV,sYAAC;gBAAI,WAAU;;kCACb,sYAAC;wBAAI,WAAU;kCAAiF;;;;;;oBAI/F,QAAQ,MAAM,KAAK,mBAClB,sYAAC;wBAAI,WAAU;kCAA6D;;;;;;oBAK7E,QAAQ,GAAG,CAAC,CAAC,uBACZ,sYAAC;4BAEC,SAAS,IAAM,eAAe,OAAO,EAAE;4BACvC,WAAW,IAAA,qHAAE,EACX,2HACA,mBAAmB,OAAO,EAAE,GACxB,iGACA;;8CAGN,sYAAC;oCAAI,WAAU;8CACb,cAAA,sYAAC,gUAAa;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;8CAErC,sYAAC;oCAAK,WAAU;8CAAY,OAAO,KAAK;;;;;;;2BAZnC,OAAO,EAAE;;;;;;;;;;;0BAkBpB,sYAAC;gBAAI,WAAU;0BACb,cAAA,sYAAC;oBAAI,WAAU;;sCACb,sYAAC;4BAAI,WAAU;;;;;;sCACf,sYAAC;sCAAI;;;;;;;;;;;;;;;;;;;;;;;AAKf;KAhEgB"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/components/upload-ui.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { UploadCloud, Loader2, FileAudio } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface UploadUIProps {\n  onUploadComplete: (url: string, fileName: string) => Promise<void>;\n  isProcessing: boolean;\n}\n\nexport function UploadUI({ onUploadComplete, isProcessing }: UploadUIProps) {\n  const [dragActive, setDragActive] = useState(false);\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      await processFile(e.dataTransfer.files[0]);\n    }\n  };\n\n  const handleChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    if (e.target.files && e.target.files[0]) {\n      await processFile(e.target.files[0]);\n    }\n  };\n\n  const processFile = async (file: File) => {\n    // 1. In a real app, upload to S3/UploadThing here to get a URL.\n    // For this example, we mock a URL or assume local serving.\n\n    // NOTE: Replace this with your actual upload logic (e.g., UploadThing)\n    // const url = await uploadToS3(file);\n    const mockUrl = \"https://example.com/audio-sample.mp3\";\n\n    await onUploadComplete(mockUrl, file.name);\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col items-center justify-center h-full p-8 animate-in fade-in zoom-in duration-500\">\n      <div className=\"max-w-md w-full text-center space-y-8\">\n        <div className=\"space-y-2\">\n          <h1 className=\"text-3xl font-serif font-bold text-primary tracking-tight\">\n            Audio Analysis AI\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Upload a recording to generate transcriptions, axioms, and logical\n            determinations.\n          </p>\n        </div>\n\n        <div\n          className={cn(\n            \"relative group cursor-pointer flex flex-col items-center justify-center w-full h-64 rounded-3xl border-2 border-dashed transition-all duration-300 bg-card/50\",\n            dragActive\n              ? \"border-primary bg-primary/5 scale-[1.02] shadow-lg\"\n              : \"border-border hover:border-primary/50 hover:bg-card\",\n          )}\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n        >\n          <input\n            type=\"file\"\n            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10\"\n            onChange={handleChange}\n            accept=\"audio/*\"\n            disabled={isProcessing}\n          />\n\n          <div className=\"flex flex-col items-center gap-4 text-center p-6 transition-all\">\n            <div\n              className={cn(\n                \"p-4 rounded-full bg-background shadow-sm ring-1 ring-border transition-transform duration-300\",\n                isProcessing ? \"animate-pulse\" : \"group-hover:-translate-y-1\",\n              )}\n            >\n              {isProcessing ? (\n                <Loader2 className=\"size-8 text-primary animate-spin\" />\n              ) : (\n                <UploadCloud className=\"size-8 text-primary\" />\n              )}\n            </div>\n\n            <div className=\"space-y-1\">\n              <p className=\"text-lg font-medium text-foreground\">\n                {isProcessing\n                  ? \"Analyzing Audio...\"\n                  : \"Click to upload or drag and drop\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                MP3, WAV, or M4A (Max 50MB)\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {isProcessing && (\n          <div className=\"p-4 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 text-sm rounded-lg border border-yellow-200 dark:border-yellow-800/50\">\n            Running conversation workflow... This includes transcription, vector\n            embedding, and logical analysis.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;;;;;;AAOO,SAAS,SAAS,EAAE,gBAAgB,EAAE,YAAY,EAAiB;;IACxE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kXAAQ,EAAC;IAE7C,MAAM,aAAa,CAAC;QAClB,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,IAAI,EAAE,IAAI,KAAK,eAAe,EAAE,IAAI,KAAK,YAAY;YACnD,cAAc;QAChB,OAAO,IAAI,EAAE,IAAI,KAAK,aAAa;YACjC,cAAc;QAChB;IACF;IAEA,MAAM,aAAa,OAAO;QACxB,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,cAAc;QACd,IAAI,EAAE,YAAY,CAAC,KAAK,IAAI,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE,EAAE;YACnD,MAAM,YAAY,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;QAC3C;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;YACvC,MAAM,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QACrC;IACF;IAEA,MAAM,cAAc,OAAO;QACzB,gEAAgE;QAChE,2DAA2D;QAE3D,uEAAuE;QACvE,sCAAsC;QACtC,MAAM,UAAU;QAEhB,MAAM,iBAAiB,SAAS,KAAK,IAAI;IAC3C;IAEA,qBACE,sYAAC;QAAI,WAAU;kBACb,cAAA,sYAAC;YAAI,WAAU;;8BACb,sYAAC;oBAAI,WAAU;;sCACb,sYAAC;4BAAG,WAAU;sCAA4D;;;;;;sCAG1E,sYAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAMvC,sYAAC;oBACC,WAAW,IAAA,qHAAE,EACX,iKACA,aACI,uDACA;oBAEN,aAAa;oBACb,aAAa;oBACb,YAAY;oBACZ,QAAQ;;sCAER,sYAAC;4BACC,MAAK;4BACL,WAAU;4BACV,UAAU;4BACV,QAAO;4BACP,UAAU;;;;;;sCAGZ,sYAAC;4BAAI,WAAU;;8CACb,sYAAC;oCACC,WAAW,IAAA,qHAAE,EACX,iGACA,eAAe,kBAAkB;8CAGlC,6BACC,sYAAC,mTAAO;wCAAC,WAAU;;;;;6DAEnB,sYAAC,0TAAW;wCAAC,WAAU;;;;;;;;;;;8CAI3B,sYAAC;oCAAI,WAAU;;sDACb,sYAAC;4CAAE,WAAU;sDACV,eACG,uBACA;;;;;;sDAEN,sYAAC;4CAAE,WAAU;sDAAgC;;;;;;;;;;;;;;;;;;;;;;;;gBAOlD,8BACC,sYAAC;oBAAI,WAAU;8BAAoJ;;;;;;;;;;;;;;;;;AAQ7K;GA7GgB;KAAA"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/app/chats/page.tsx"],"sourcesContent":["\"use client\";\n\nimport \"@/app/globals.css\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { authClient } from \"@/lib/auth-client\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { UploadUI } from \"@/components/upload-ui\";\nimport { Loader2 } from \"lucide-react\";\n\nexport default function ChatsDashboardPage() {\n  const router = useRouter();\n\n  // -- State --\n  const [userId, setUserId] = useState<string | null>(null);\n  const [threads, setThreads] = useState<any[]>([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // -- 1. Auth & Initial Load --\n  useEffect(() => {\n    const init = async () => {\n      try {\n        const { data } = await authClient.getSession();\n        if (!data?.user) return router.push(\"/login\");\n\n        setUserId(data.user.id);\n\n        // Fetch Threads for the sidebar\n        const res = await fetch(\n          `${process.env.NEXT_PUBLIC_MASTRA_BASE_URL}/threads?resourceId=${data.user.id}`,\n        );\n        if (res.ok) {\n          const threadList = await res.json();\n          setThreads(threadList);\n        }\n      } catch (e) {\n        router.push(\"/login\");\n      }\n    };\n    init();\n  }, [router]);\n\n  // -- 2. Handlers --\n\n  const handleNewChat = () => {\n    // On this page, \"New Chat\" just ensures the upload UI is visible and ready.\n    // Since it's always visible, this could be a no-op or reset any upload-specific state.\n  };\n\n  const handleSelectThread = (threadId: string) => {\n    // When a thread is selected from the sidebar, navigate to its dedicated chat page.\n    router.push(`/chats/${threadId}`);\n  };\n\n  const handleUploadComplete = async (audioUrl: string, fileName: string) => {\n    if (!userId) return;\n    setIsProcessing(true);\n\n    try {\n      // A. Create Thread\n      const threadRes = await fetch(\n        `${process.env.NEXT_PUBLIC_MASTRA_BASE_URL}/threads`,\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            resourceId: userId,\n            title: fileName,\n            audioUrl: audioUrl,\n          }),\n        },\n      );\n\n      if (!threadRes.ok) throw new Error(\"Failed to create thread.\");\n      const thread = await threadRes.json();\n\n      // B. Run Workflow (and don't wait for it)\n      // This runs Transcription -> RAG -> Logic in the background\n      fetch(`${process.env.NEXT_PUBLIC_MASTRA_BASE_URL}/conversation`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          filePath: audioUrl,\n          threadId: thread.id,\n          resourceId: userId,\n        }),\n      });\n\n      // C. Redirect to the new chat page\n      router.push(`/chats/${thread.id}`);\n    } catch (error) {\n      console.error(error);\n      alert(\"Failed to process audio.\");\n      setIsProcessing(false);\n    }\n    // No need to set isProcessing to false if we are navigating away\n  };\n\n  // -- Render --\n\n  if (!userId) {\n    return (\n      <div className=\"flex h-screen items-center justify-center bg-background\">\n        <Loader2 className=\"animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen w-full bg-background overflow-hidden\">\n      {/* Sidebar */}\n      <AppSidebar\n        threads={threads}\n        activeThreadId={null}\n        onSelectThread={handleSelectThread}\n        onNewChat={handleNewChat}\n        className=\"h-full\"\n      />\n\n      {/* Main Content */}\n      <main className=\"flex-1 flex flex-col h-full relative min-w-0\">\n        <UploadUI\n          onUploadComplete={handleUploadComplete}\n          isProcessing={isProcessing}\n        />\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AA6Ba;;AA1Bb;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAUe,SAAS;;IACtB,MAAM,SAAS,IAAA,2VAAS;IAExB,cAAc;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kXAAQ,EAAgB;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kXAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,kXAAQ,EAAC;IAEjD,+BAA+B;IAC/B,IAAA,mXAAS;wCAAC;YACR,MAAM;qDAAO;oBACX,IAAI;wBACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sIAAU,CAAC,UAAU;wBAC5C,IAAI,CAAC,MAAM,MAAM,OAAO,OAAO,IAAI,CAAC;wBAEpC,UAAU,KAAK,IAAI,CAAC,EAAE;wBAEtB,gCAAgC;wBAChC,MAAM,MAAM,MAAM,MAChB,6DAA2C,oBAAoB,EAAE,KAAK,IAAI,CAAC,EAAE,EAAE;wBAEjF,IAAI,IAAI,EAAE,EAAE;4BACV,MAAM,aAAa,MAAM,IAAI,IAAI;4BACjC,WAAW;wBACb;oBACF,EAAE,OAAO,GAAG;wBACV,OAAO,IAAI,CAAC;oBACd;gBACF;;YACA;QACF;uCAAG;QAAC;KAAO;IAEX,oBAAoB;IAEpB,MAAM,gBAAgB;IACpB,4EAA4E;IAC5E,uFAAuF;IACzF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,mFAAmF;QACnF,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU;IAClC;IAEA,MAAM,uBAAuB,OAAO,UAAkB;QACpD,IAAI,CAAC,QAAQ;QACb,gBAAgB;QAEhB,IAAI;YACF,mBAAmB;YACnB,MAAM,YAAY,MAAM,MACtB,6DAA2C,QAAQ,CAAC,EACpD;gBACE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,YAAY;oBACZ,OAAO;oBACP,UAAU;gBACZ;YACF;YAGF,IAAI,CAAC,UAAU,EAAE,EAAE,MAAM,IAAI,MAAM;YACnC,MAAM,SAAS,MAAM,UAAU,IAAI;YAEnC,0CAA0C;YAC1C,4DAA4D;YAC5D,MAAM,6DAA2C,aAAa,CAAC,EAAE;gBAC/D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,UAAU;oBACV,UAAU,OAAO,EAAE;oBACnB,YAAY;gBACd;YACF;YAEA,mCAAmC;YACnC,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;QACnC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;YACN,gBAAgB;QAClB;IACA,iEAAiE;IACnE;IAEA,eAAe;IAEf,IAAI,CAAC,QAAQ;QACX,qBACE,sYAAC;YAAI,WAAU;sBACb,cAAA,sYAAC,mTAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,qBACE,sYAAC;QAAI,WAAU;;0BAEb,sYAAC,8IAAU;gBACT,SAAS;gBACT,gBAAgB;gBAChB,gBAAgB;gBAChB,WAAW;gBACX,WAAU;;;;;;0BAIZ,sYAAC;gBAAK,WAAU;0BACd,cAAA,sYAAC,0IAAQ;oBACP,kBAAkB;oBAClB,cAAc;;;;;;;;;;;;;;;;;AAKxB;GAtHwB;;QACP,2VAAS;;;KADF"}}]
}