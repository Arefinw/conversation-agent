{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/date.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/date.ts"],"sourcesContent":["export const getDate = (span: number, unit: \"sec\" | \"ms\" = \"ms\") => {\n\treturn new Date(Date.now() + (unit === \"sec\" ? span * 1000 : span));\n};\n"],"names":[],"mappings":";;;;;AAAA,MAAa,UAAA,CAAW,MAAc,OAAqB,IAAA,KAAS;IACnE,OAAO,IAAI,KAAK,KAAK,GAAA,EAAK,GAAA,CAAI,SAAS,QAAQ,OAAO,MAAO,IAAA,EAAM"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/time.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/time.ts"],"sourcesContent":["// Time constants (in milliseconds)\nconst SEC = 1000;\nconst MIN = SEC * 60;\nconst HOUR = MIN * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365.25;\n\n// Unit type definitions\ntype Years = \"years\" | \"year\" | \"yrs\" | \"yr\" | \"y\";\ntype Months = \"months\" | \"month\" | \"mo\";\ntype Weeks = \"weeks\" | \"week\" | \"w\";\ntype Days = \"days\" | \"day\" | \"d\";\ntype Hours = \"hours\" | \"hour\" | \"hrs\" | \"hr\" | \"h\";\ntype Minutes = \"minutes\" | \"minute\" | \"mins\" | \"min\" | \"m\";\ntype Seconds = \"seconds\" | \"second\" | \"secs\" | \"sec\" | \"s\";\ntype Unit = Years | Months | Weeks | Days | Hours | Minutes | Seconds;\ntype UnitAnyCase = Capitalize<Unit> | Uppercase<Unit> | Unit;\ntype Suffix = \" ago\" | \" from now\";\ntype Prefix = \"+\" | \"-\" | \"+ \" | \"- \";\n\n// Base time string formats\ntype BaseTimeString = `${number}${UnitAnyCase}` | `${number} ${UnitAnyCase}`;\n\n/**\n * A typed string representing a time duration.\n * Supports formats like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\", \"-5m\", etc.\n */\nexport type TimeString =\n\t| BaseTimeString\n\t| `${BaseTimeString}${Suffix}`\n\t| `${Prefix}${BaseTimeString}`;\n\nconst REGEX =\n\t/^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;\n\nfunction parse(value: string): number {\n\tconst match = REGEX.exec(value);\n\n\tif (!match || (match[4] && match[1])) {\n\t\tthrow new TypeError(\n\t\t\t`Invalid time string format: \"${value}\". Use formats like \"7d\", \"30m\", \"1 hour\", etc.`,\n\t\t);\n\t}\n\n\tconst n = parseFloat(match[2]!);\n\tconst unit = match[3]!.toLowerCase();\n\n\tlet result: number;\n\tswitch (unit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\":\n\t\t\tresult = n * YEAR;\n\t\t\tbreak;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\":\n\t\t\tresult = n * MONTH;\n\t\t\tbreak;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\":\n\t\t\tresult = n * WEEK;\n\t\t\tbreak;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\":\n\t\t\tresult = n * DAY;\n\t\t\tbreak;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\":\n\t\t\tresult = n * HOUR;\n\t\t\tbreak;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\":\n\t\t\tresult = n * MIN;\n\t\t\tbreak;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\":\n\t\t\tresult = n * SEC;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new TypeError(`Unknown time unit: \"${unit}\"`);\n\t}\n\n\tif (match[1] === \"-\" || match[4] === \"ago\") {\n\t\treturn -result;\n\t}\n\n\treturn result;\n}\n\n/**\n * Parse a time string and return the value in milliseconds.\n *\n * @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n * @returns The parsed value in milliseconds\n * @throws TypeError if the string format is invalid\n *\n * @example\n * ms(\"1d\")          // 86400000\n * ms(\"2 hours\")     // 7200000\n * ms(\"30s\")         // 30000\n * ms(\"2 hours ago\") // -7200000\n */\nexport function ms(value: TimeString): number {\n\treturn parse(value);\n}\n\n/**\n * Parse a time string and return the value in seconds.\n *\n * @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n * @returns The parsed value in seconds (rounded)\n * @throws TypeError if the string format is invalid\n *\n * @example\n * sec(\"1d\")          // 86400\n * sec(\"2 hours\")     // 7200\n * sec(\"-30s\")        // -30\n * sec(\"2 hours ago\") // -7200\n */\nexport function sec(value: TimeString): number {\n\treturn Math.round(parse(value) / 1000);\n}\n"],"names":["result: number"],"mappings":";;;;;;;AACA,MAAM,MAAM;AACZ,MAAM,MAAM,MAAM;AAClB,MAAM,OAAO,MAAM;AACnB,MAAM,MAAM,OAAO;AACnB,MAAM,OAAO,MAAM;AACnB,MAAM,QAAQ,MAAM;AACpB,MAAM,OAAO,MAAM;AA2BnB,MAAM,QACL;AAED,SAAS,MAAM,KAAA,EAAuB;IACrC,MAAM,QAAQ,MAAM,IAAA,CAAK,MAAM;IAE/B,IAAI,CAAC,SAAU,KAAA,CAAM,EAAA,IAAM,KAAA,CAAM,EAAA,CAChC,CAAA,MAAM,IAAI,UACT,CAAA,6BAAA,EAAgC,MAAM,+CAAA,CAAA,CACtC;IAGF,MAAM,IAAI,WAAW,KAAA,CAAM,EAAA,CAAI;IAC/B,MAAM,OAAO,KAAA,CAAM,EAAA,CAAI,WAAA,EAAa;IAEpC,IAAIA;IACJ,OAAQ,MAAR;QACC,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;YACJ,SAAS,IAAI;YACb;QACD,QACC;YAAA,MAAM,IAAI,UAAU,CAAA,oBAAA,EAAuB,KAAK,CAAA,CAAA,CAAG;;IAGrD,IAAI,KAAA,CAAM,EAAA,KAAO,OAAO,KAAA,CAAM,EAAA,KAAO,MACpC,CAAA,OAAO,CAAC;IAGT,OAAO;;;;;;;;;;;;;;GAgBR,SAAgB,GAAG,KAAA,EAA2B;IAC7C,OAAO,MAAM,MAAM;;;;;;;;;;;;;;GAgBpB,SAAgB,IAAI,KAAA,EAA2B;IAC9C,OAAO,KAAK,KAAA,CAAM,MAAM,MAAM,GAAG,IAAK"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/get-request-ip.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/get-request-ip.ts"],"sourcesContent":["import type { BetterAuthOptions } from \"@better-auth/core\";\nimport { isDevelopment, isTest } from \"@better-auth/core/env\";\nimport * as z from \"zod\";\n\n// Localhost IP used for test and development environments\nconst LOCALHOST_IP = \"127.0.0.1\";\n\nexport function getIp(\n\treq: Request | Headers,\n\toptions: BetterAuthOptions,\n): string | null {\n\tif (options.advanced?.ipAddress?.disableIpTracking) {\n\t\treturn null;\n\t}\n\n\tconst headers = \"headers\" in req ? req.headers : req;\n\n\tconst defaultHeaders = [\"x-forwarded-for\"];\n\n\tconst ipHeaders =\n\t\toptions.advanced?.ipAddress?.ipAddressHeaders || defaultHeaders;\n\n\tfor (const key of ipHeaders) {\n\t\tconst value = \"get\" in headers ? headers.get(key) : headers[key];\n\t\tif (typeof value === \"string\") {\n\t\t\tconst ip = value.split(\",\")[0]!.trim();\n\t\t\tif (isValidIP(ip)) {\n\t\t\t\treturn ip;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Fallback to localhost IP in development/test environments when no IP found in headers\n\tif (isTest() || isDevelopment()) {\n\t\treturn LOCALHOST_IP;\n\t}\n\n\treturn null;\n}\n\nfunction isValidIP(ip: string): boolean {\n\tconst ipv4 = z.ipv4().safeParse(ip);\n\n\tif (ipv4.success) {\n\t\treturn true;\n\t}\n\n\tconst ipv6 = z.ipv6().safeParse(ip);\n\tif (ipv6.success) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAKA,MAAM,eAAe;AAErB,SAAgB,MACf,GAAA,EACA,OAAA,EACgB;IAChB,IAAI,QAAQ,QAAA,EAAU,WAAW,kBAChC,CAAA,OAAO;IAGR,MAAM,UAAU,aAAa,MAAM,IAAI,OAAA,GAAU;IAIjD,MAAM,YACL,QAAQ,QAAA,EAAU,WAAW,oBAHP;QAAC;KAAkB;IAK1C,KAAK,MAAM,OAAO,UAAW;QAC5B,MAAM,QAAQ,SAAS,UAAU,QAAQ,GAAA,CAAI,IAAI,GAAG,OAAA,CAAQ,IAAA;QAC5D,IAAI,OAAO,UAAU,UAAU;YAC9B,MAAM,KAAK,MAAM,KAAA,CAAM,IAAI,CAAC,EAAA,CAAI,IAAA,EAAM;YACtC,IAAI,UAAU,GAAG,CAChB,CAAA,OAAO;;;IAMV,QAAI,4ZAAA,EAAQ,SAAI,0aAAA,EAAe,CAC9B,EAAA,OAAO;IAGR,OAAO;;AAGR,SAAS,UAAU,EAAA,EAAqB;IAGvC,IAFa,EAAE,uMAAA,EAAM,CAAC,SAAA,CAAU,GAAG,CAE1B,OAAA,CACR,CAAA,OAAO;IAIR,IADa,EAAE,uMAAA,EAAM,CAAC,SAAA,CAAU,GAAG,CAC1B,OAAA,CACR,CAAA,OAAO;IAGR,OAAO"}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/wildcard.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/wildcard.ts"],"sourcesContent":["//https://github.com/axtgr/wildcard-match\n\n/**\n * Escapes a character if it has a special meaning in regular expressions\n * and returns the character as is if it doesn't\n */\nfunction escapeRegExpChar(char: string) {\n\tif (\n\t\tchar === \"-\" ||\n\t\tchar === \"^\" ||\n\t\tchar === \"$\" ||\n\t\tchar === \"+\" ||\n\t\tchar === \".\" ||\n\t\tchar === \"(\" ||\n\t\tchar === \")\" ||\n\t\tchar === \"|\" ||\n\t\tchar === \"[\" ||\n\t\tchar === \"]\" ||\n\t\tchar === \"{\" ||\n\t\tchar === \"}\" ||\n\t\tchar === \"*\" ||\n\t\tchar === \"?\" ||\n\t\tchar === \"\\\\\"\n\t) {\n\t\treturn `\\\\${char}`;\n\t} else {\n\t\treturn char;\n\t}\n}\n\n/**\n * Escapes all characters in a given string that have a special meaning in regular expressions\n */\nfunction escapeRegExpString(str: string) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) {\n\t\tresult += escapeRegExpChar(str[i]!);\n\t}\n\treturn result;\n}\n\n/**\n * Transforms one or more glob patterns into a RegExp pattern\n */\nfunction transform(\n\tpattern: string | string[],\n\tseparator: string | boolean = true,\n): string {\n\tif (Array.isArray(pattern)) {\n\t\tlet regExpPatterns = pattern.map((p) => `^${transform(p, separator)}$`);\n\t\treturn `(?:${regExpPatterns.join(\"|\")})`;\n\t}\n\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\n\tif (separator === true) {\n\t\t// In this case forward slashes in patterns match both forward and backslashes in samples:\n\t\t//\n\t\t// `foo/bar` will match `foo/bar`\n\t\t//           will match `foo\\bar`\n\t\t//\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else {\n\t\t\twildcard = `[^${separatorMatcher}]`;\n\t\t}\n\t}\n\n\t// When a separator is explicitly specified in a pattern,\n\t// it MUST match ONE OR MORE separators in a sample:\n\t//\n\t// `foo/bar/` will match  `foo//bar///`\n\t//            won't match `foo/bar`\n\t//\n\t// When a pattern doesn't have a trailing separator,\n\t// a sample can still optionally have them:\n\t//\n\t// `foo/bar` will match `foo/bar//`\n\t//\n\t// So we use different quantifiers depending on the index of a segment.\n\tlet requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tlet optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\n\tlet segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tlet segment = segments[s]!;\n\t\tlet nextSegment = segments[s + 1]!;\n\t\tlet currentSeparator = \"\";\n\n\t\tif (!segment && s > 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (separator) {\n\t\t\tif (s === segments.length - 1) {\n\t\t\t\tcurrentSeparator = optionalSeparator;\n\t\t\t} else if (nextSegment !== \"**\") {\n\t\t\t\tcurrentSeparator = requiredSeparator;\n\t\t\t} else {\n\t\t\t\tcurrentSeparator = \"\";\n\t\t\t}\n\t\t}\n\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tlet char = segment[c]!;\n\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]!);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") {\n\t\t\t\tresult += wildcard;\n\t\t\t} else if (char === \"*\") {\n\t\t\t\tresult += `${wildcard}*?`;\n\t\t\t} else {\n\t\t\t\tresult += escapeRegExpChar(char);\n\t\t\t}\n\t\t}\n\n\t\tresult += currentSeparator;\n\t}\n\n\treturn result;\n}\n\ninterface WildcardMatchOptions {\n\t/** Separator to be used to split patterns and samples into segments */\n\tseparator?: string | boolean;\n\n\t/** Flags to pass to the RegExp */\n\tflags?: string;\n}\n\n// This overrides the function's signature because for the end user\n// the function is always bound to a RegExp\ninterface isMatch {\n\t/**\n\t * Tests if a sample string matches the pattern(s)\n\t *\n\t * ```js\n\t * isMatch('foo') //=> true\n\t * ```\n\t */\n\t(sample: string): boolean;\n\n\t/** Compiled regular expression */\n\tregexp: RegExp;\n\n\t/** Original pattern or array of patterns that was used to compile the RegExp */\n\tpattern: string | string[];\n\n\t/** Options that were used to compile the RegExp */\n\toptions: WildcardMatchOptions;\n}\n\nfunction isMatch(regexp: RegExp, sample: string) {\n\tif (typeof sample !== \"string\") {\n\t\tthrow new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\t}\n\n\treturn regexp.test(sample);\n}\n\n/**\n * Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n * The isMatch function takes a sample string as its only argument and returns `true`\n * if the string matches the pattern(s).\n *\n * ```js\n * wildcardMatch('src/*.js')('src/index.js') //=> true\n * ```\n *\n * ```js\n * const isMatch = wildcardMatch('*.example.com', '.')\n * isMatch('foo.example.com') //=> true\n * isMatch('foo.bar.com') //=> false\n * ```\n */\nfunction wildcardMatch(\n\tpattern: string | string[],\n\toptions?: string | boolean | WildcardMatchOptions,\n) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) {\n\t\tthrow new TypeError(\n\t\t\t`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`,\n\t\t);\n\t}\n\n\tif (typeof options === \"string\" || typeof options === \"boolean\") {\n\t\toptions = { separator: options };\n\t}\n\n\tif (\n\t\targuments.length === 2 &&\n\t\t!(\n\t\t\ttypeof options === \"undefined\" ||\n\t\t\t(typeof options === \"object\" &&\n\t\t\t\toptions !== null &&\n\t\t\t\t!Array.isArray(options))\n\t\t)\n\t) {\n\t\tthrow new TypeError(\n\t\t\t`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`,\n\t\t);\n\t}\n\n\toptions = options || {};\n\n\tif (options.separator === \"\\\\\") {\n\t\tthrow new Error(\n\t\t\t\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\",\n\t\t);\n\t}\n\n\tlet regexpPattern = transform(pattern, options.separator);\n\tlet regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\n\tlet fn = isMatch.bind(null, regexp) as isMatch;\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\nexport { wildcardMatch };\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/hide-metadata.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/hide-metadata.ts"],"sourcesContent":["export const HIDE_METADATA = {\n\tscope: \"server\",\n} as const;\n"],"names":[],"mappings":";;;;;AAAA,MAAa,gBAAgB;IAC5B,OAAO;AAAA,CACP"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/index.mjs"],"sourcesContent":["import { generateState, parseState } from \"../oauth2/state.mjs\";\nimport { HIDE_METADATA } from \"./hide-metadata.mjs\";\nimport { generateId as generateId$1 } from \"@better-auth/core/utils\";\n\nexport { generateId$1 as generateId };"],"names":[],"mappings":";AAAA;AACA;AACA;AAAA","ignoreList":[0]}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/plugin-helper.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/plugin-helper.ts"],"sourcesContent":["import { APIError } from \"better-call\";\n\nexport const getEndpointResponse = async <T>(ctx: {\n\tcontext: {\n\t\treturned?: unknown;\n\t};\n}) => {\n\tconst returned = ctx.context.returned;\n\tif (!returned) {\n\t\treturn null;\n\t}\n\tif (returned instanceof Response) {\n\t\tif (returned.status !== 200) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (await returned.clone().json()) as T;\n\t}\n\tif (returned instanceof APIError) {\n\t\treturn null;\n\t}\n\treturn returned as T;\n};\n"],"names":[],"mappings":";;;;;;;;AAEA,MAAa,sBAAsB,OAAU,QAIvC;IACL,MAAM,WAAW,IAAI,OAAA,CAAQ,QAAA;IAC7B,IAAI,CAAC,SACJ,CAAA,OAAO;IAER,IAAI,oBAAoB,UAAU;QACjC,IAAI,SAAS,MAAA,KAAW,IACvB,CAAA,OAAO;QAER,OAAQ,MAAM,SAAS,KAAA,EAAO,CAAC,IAAA,EAAM;;IAEtC,IAAI,oBAAoB,4OAAA,CACvB,CAAA,OAAO;IAER,OAAO"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/middleware-response.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/middleware-response.ts"],"sourcesContent":["type Params = {\n\tmessage: string;\n\tstatus: number;\n};\n\nexport const middlewareResponse = ({ message, status }: Params) => ({\n\tresponse: new Response(\n\t\tJSON.stringify({\n\t\t\tmessage,\n\t\t}),\n\t\t{\n\t\t\tstatus,\n\t\t},\n\t),\n});\n"],"names":[],"mappings":";;;;;AAKA,MAAa,qBAAA,CAAsB,EAAE,OAAA,EAAS,MAAA,EAAA,GAAA,CAAsB;QACnE,UAAU,IAAI,SACb,KAAK,SAAA,CAAU;YACd;QAAA,CACA,CAAC,EACF;YACC;QAAA,CACA,CACD;IAAA,CACD"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/url.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/url.ts"],"sourcesContent":["import { env } from \"@better-auth/core/env\";\nimport { BetterAuthError } from \"@better-auth/core/error\";\n\nfunction checkHasPath(url: string): boolean {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tconst pathname = parsedUrl.pathname.replace(/\\/+$/, \"\") || \"/\";\n\t\treturn pathname !== \"/\";\n\t} catch {\n\t\tthrow new BetterAuthError(\n\t\t\t`Invalid base URL: ${url}. Please provide a valid base URL.`,\n\t\t);\n\t}\n}\n\nfunction assertHasProtocol(url: string): void {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") {\n\t\t\tthrow new BetterAuthError(\n\t\t\t\t`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`,\n\t\t\t);\n\t\t}\n\t} catch (error) {\n\t\tif (error instanceof BetterAuthError) {\n\t\t\tthrow error;\n\t\t}\n\t\tthrow new BetterAuthError(\n\t\t\t`Invalid base URL: ${url}. Please provide a valid base URL.`,\n\t\t\tString(error),\n\t\t);\n\t}\n}\n\nfunction withPath(url: string, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\n\tconst hasPath = checkHasPath(url);\n\tif (hasPath) {\n\t\treturn url;\n\t}\n\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\n\tif (!path || path === \"/\") {\n\t\treturn trimmedUrl;\n\t}\n\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\n\nfunction validateProxyHeader(header: string, type: \"host\" | \"proto\"): boolean {\n\tif (!header || header.trim() === \"\") {\n\t\treturn false;\n\t}\n\n\tif (type === \"proto\") {\n\t\t// Only allow http and https protocols\n\t\treturn header === \"http\" || header === \"https\";\n\t}\n\n\tif (type === \"host\") {\n\t\tconst suspiciousPatterns = [\n\t\t\t/\\.\\./, // Path traversal\n\t\t\t/\\0/, // Null bytes\n\t\t\t/[\\s]/, // Whitespace (except legitimate spaces that should be trimmed)\n\t\t\t/^[.]/, // Starting with dot\n\t\t\t/[<>'\"]/, // HTML/script injection characters\n\t\t\t/javascript:/i, // Protocol injection\n\t\t\t/file:/i, // File protocol\n\t\t\t/data:/i, // Data protocol\n\t\t];\n\n\t\tif (suspiciousPatterns.some((pattern) => pattern.test(header))) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Basic hostname validation (allows localhost, IPs, and domains with ports)\n\t\t// This is a simple check, not exhaustive RFC validation\n\t\tconst hostnameRegex =\n\t\t\t/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/;\n\n\t\t// Also allow IPv4 addresses\n\t\tconst ipv4Regex = /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/;\n\n\t\t// Also allow IPv6 addresses in brackets\n\t\tconst ipv6Regex = /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/;\n\n\t\t// Allow localhost variations\n\t\tconst localhostRegex = /^localhost(:[0-9]{1,5})?$/i;\n\n\t\treturn (\n\t\t\thostnameRegex.test(header) ||\n\t\t\tipv4Regex.test(header) ||\n\t\t\tipv6Regex.test(header) ||\n\t\t\tlocalhostRegex.test(header)\n\t\t);\n\t}\n\n\treturn false;\n}\n\nexport function getBaseURL(\n\turl?: string,\n\tpath?: string,\n\trequest?: Request,\n\tloadEnv?: boolean,\n\ttrustedProxyHeaders?: boolean | undefined,\n) {\n\tif (url) {\n\t\treturn withPath(url, path);\n\t}\n\n\tif (loadEnv !== false) {\n\t\tconst fromEnv =\n\t\t\tenv.BETTER_AUTH_URL ||\n\t\t\tenv.NEXT_PUBLIC_BETTER_AUTH_URL ||\n\t\t\tenv.PUBLIC_BETTER_AUTH_URL ||\n\t\t\tenv.NUXT_PUBLIC_BETTER_AUTH_URL ||\n\t\t\tenv.NUXT_PUBLIC_AUTH_URL ||\n\t\t\t(env.BASE_URL !== \"/\" ? env.BASE_URL : undefined);\n\n\t\tif (fromEnv) {\n\t\t\treturn withPath(fromEnv, path);\n\t\t}\n\t}\n\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (\n\t\t\tvalidateProxyHeader(fromRequestProto, \"proto\") &&\n\t\t\tvalidateProxyHeader(fromRequest, \"host\")\n\t\t) {\n\t\t\ttry {\n\t\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t\t} catch (_error) {}\n\t\t}\n\t}\n\n\tif (request) {\n\t\tconst url = getOrigin(request.url);\n\t\tif (!url) {\n\t\t\tthrow new BetterAuthError(\n\t\t\t\t\"Could not get origin from request. Please provide a valid base URL.\",\n\t\t\t);\n\t\t}\n\t\treturn withPath(url, path);\n\t}\n\n\tif (typeof window !== \"undefined\" && window.location) {\n\t\treturn withPath(window.location.origin, path);\n\t}\n\treturn undefined;\n}\n\nexport function getOrigin(url: string) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\t// For custom URL schemes (like exp://), the origin property returns the string \"null\"\n\t\t// instead of null. We need to handle this case and return null so the fallback logic works.\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getProtocol(url: string) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\nexport function getHost(url: string) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n"],"names":["url"],"mappings":";;;;;;;;;;;;;;;;;AAGA,SAAS,aAAa,GAAA,EAAsB;IAC3C,IAAI;QAGH,OAAA,CAFkB,IAAI,IAAI,IAAI,CACH,QAAA,CAAS,OAAA,CAAQ,QAAQ,GAAG,IAAI,GAAA,MACvC;aACb;QACP,MAAM,IAAI,gbAAA,CACT,CAAA,kBAAA,EAAqB,IAAI,kCAAA,CAAA,CACzB;;;AAIH,SAAS,kBAAkB,GAAA,EAAmB;IAC7C,IAAI;QACH,MAAM,YAAY,IAAI,IAAI,IAAI;QAC9B,IAAI,UAAU,QAAA,KAAa,WAAW,UAAU,QAAA,KAAa,SAC5D,CAAA,MAAM,IAAI,gbAAA,CACT,CAAA,kBAAA,EAAqB,IAAI,0CAAA,CAAA,CACzB;aAEM,OAAO;QACf,IAAI,iBAAiB,gbAAA,CACpB,CAAA,MAAM;QAEP,MAAM,IAAI,gbAAA,CACT,CAAA,kBAAA,EAAqB,IAAI,kCAAA,CAAA,EACzB,OAAO,MAAM,CACb;;;AAIH,SAAS,SAAS,GAAA,EAAa,OAAO,WAAA,EAAa;IAClD,kBAAkB,IAAI;IAGtB,IADgB,aAAa,IAAI,CAEhC,CAAA,OAAO;IAGR,MAAM,aAAa,IAAI,OAAA,CAAQ,QAAQ,GAAG;IAE1C,IAAI,CAAC,QAAQ,SAAS,IACrB,CAAA,OAAO;IAGR,OAAO,KAAK,UAAA,CAAW,IAAI,GAAG,OAAO,CAAA,CAAA,EAAI,MAAA;IACzC,OAAO,GAAG,aAAa,MAAA;;AAGxB,SAAS,oBAAoB,MAAA,EAAgB,IAAA,EAAiC;IAC7E,IAAI,CAAC,UAAU,OAAO,IAAA,EAAM,KAAK,GAChC,CAAA,OAAO;IAGR,IAAI,SAAS,QAEZ,CAAA,OAAO,WAAW,UAAU,WAAW;IAGxC,IAAI,SAAS,QAAQ;QAYpB,IAX2B;YAC1B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACA,CAEsB,IAAA,CAAA,CAAM,UAAY,QAAQ,IAAA,CAAK,OAAO,CAAC,CAC7D,CAAA,OAAO;QAiBR,OAXC,8GAYc,IAAA,CAAK,OAAO,IATT,wCAUP,IAAA,CAAK,OAAO,IAPL,oCAQP,IAAA,CAAK,OAAO,IALA,6BAMP,IAAA,CAAK,OAAO;;IAI7B,OAAO;;AAGR,SAAgB,WACf,GAAA,EACA,IAAA,EACA,OAAA,EACA,OAAA,EACA,mBAAA,EACC;IACD,IAAI,IACH,CAAA,OAAO,SAAS,KAAK,KAAK;IAG3B,IAAI,YAAY,OAAO;QACtB,MAAM,UACL,sZAAA,CAAI,eAAA,IACJ,sZAAA,CAAI,2BAAA,IACJ,sZAAA,CAAI,sBAAA,IACJ,sZAAA,CAAI,2BAAA,IACJ,sZAAA,CAAI,oBAAA,IAAA,CACH,sZAAA,CAAI,QAAA,KAAa,MAAM,sZAAA,CAAI,QAAA,GAAW,KAAA,CAAA;QAExC,IAAI,QACH,CAAA,OAAO,SAAS,SAAS,KAAK;;IAIhC,MAAM,cAAc,SAAS,QAAQ,IAAI,mBAAmB;IAC5D,MAAM,mBAAmB,SAAS,QAAQ,IAAI,oBAAoB;IAClE,IAAI,eAAe,oBAAoB,qBACtC;YACC,oBAAoB,kBAAkB,QAAQ,IAC9C,oBAAoB,aAAa,OAAO,CAExC,CAAA,IAAI;YACH,OAAO,SAAS,GAAG,iBAAiB,GAAA,EAAK,aAAA,EAAe,KAAK;iBACrD,QAAQ,CAAA;;IAInB,IAAI,SAAS;QACZ,MAAMA,QAAM,UAAU,QAAQ,GAAA,CAAI;QAClC,IAAI,CAACA,MACJ,CAAA,MAAM,IAAI,gbAAA,CACT,sEACA;QAEF,OAAO,SAASA,OAAK,KAAK;;IAG3B,IAAI,OAAO,WAAW,eAAe,OAAO,SAC3C,QAAO,SAAS,OAAO,SAAS,QAAQ,KAAK;;;AAK/C,SAAgB,UAAU,GAAA,EAAa;IACtC,IAAI;QACH,MAAM,YAAY,IAAI,IAAI,IAAI;QAG9B,OAAO,UAAU,MAAA,KAAW,SAAS,OAAO,UAAU,MAAA;aAC/C;QACP,OAAO;;;AAIT,SAAgB,YAAY,GAAA,EAAa;IACxC,IAAI;QAEH,OADkB,IAAI,IAAI,IAAI,CACb,QAAA;aACV;QACP,OAAO;;;AAIT,SAAgB,QAAQ,GAAA,EAAa;IACpC,IAAI;QAEH,OADkB,IAAI,IAAI,IAAI,CACb,IAAA;aACV;QACP,OAAO"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/boolean.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/boolean.ts"],"sourcesContent":["export function toBoolean(value: any): boolean {\n\treturn value === \"true\" || value === true;\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAgB,UAAU,KAAA,EAAqB;IAC9C,OAAO,UAAU,UAAU,UAAU"}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/shim.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/shim.ts"],"sourcesContent":["export const shimContext = <T extends Record<string, any>>(\n\toriginalObject: T,\n\tnewContext: Record<string, any>,\n) => {\n\tconst shimmedObj: Record<string, any> = {};\n\tfor (const [key, value] of Object.entries(originalObject)) {\n\t\tshimmedObj[key] = (ctx: Record<string, any>) => {\n\t\t\treturn value({\n\t\t\t\t...ctx,\n\t\t\t\tcontext: {\n\t\t\t\t\t...newContext,\n\t\t\t\t\t...ctx.context,\n\t\t\t\t},\n\t\t\t});\n\t\t};\n\t\tshimmedObj[key].path = value.path;\n\t\tshimmedObj[key].method = value.method;\n\t\tshimmedObj[key].options = value.options;\n\t\tshimmedObj[key].headers = value.headers;\n\t}\n\treturn shimmedObj as T;\n};\n"],"names":["shimmedObj: Record<string, any>"],"mappings":";;;;;AAAA,MAAa,cAAA,CACZ,gBACA,eACI;IACJ,MAAMA,aAAkC,CAAA,CAAE;IAC1C,KAAK,MAAM,CAAC,KAAK,MAAA,IAAU,OAAO,OAAA,CAAQ,eAAe,CAAE;QAC1D,UAAA,CAAW,IAAA,GAAA,CAAQ,QAA6B;YAC/C,OAAO,MAAM;gBACZ,GAAG,GAAA;gBACH,SAAS;oBACR,GAAG,UAAA;oBACH,GAAG,IAAI,OAAA;iBACP;aACD,CAAC;;QAEH,UAAA,CAAW,IAAA,CAAK,IAAA,GAAO,MAAM,IAAA;QAC7B,UAAA,CAAW,IAAA,CAAK,MAAA,GAAS,MAAM,MAAA;QAC/B,UAAA,CAAW,IAAA,CAAK,OAAA,GAAU,MAAM,OAAA;QAChC,UAAA,CAAW,IAAA,CAAK,OAAA,GAAU,MAAM,OAAA;;IAEjC,OAAO"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/hashing.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/hashing.ts"],"sourcesContent":["import { keccak_256 } from \"@noble/hashes/sha3.js\";\nimport { utf8ToBytes } from \"@noble/hashes/utils.js\";\n\n/**\n * TS implementation of ERC-55 (\"Mixed-case checksum address encoding\") using @noble/hashes\n * @param address - The address to convert to a checksum address\n * @returns The checksummed address\n */\nexport function toChecksumAddress(address: string) {\n\taddress = address.toLowerCase().replace(\"0x\", \"\");\n\t// Hash the address (treat it as UTF-8) and return as a hex string\n\tconst hash = [...keccak_256(utf8ToBytes(address))]\n\t\t.map((v) => v.toString(16).padStart(2, \"0\"))\n\t\t.join(\"\");\n\tlet ret = \"0x\";\n\n\tfor (let i = 0; i < 40; i++) {\n\t\tif (parseInt(hash[i]!, 16) >= 8) {\n\t\t\tret += address[i]!.toUpperCase();\n\t\t} else {\n\t\t\tret += address[i]!;\n\t\t}\n\t}\n\n\treturn ret;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;GAQA,SAAgB,kBAAkB,OAAA,EAAiB;IAClD,UAAU,QAAQ,WAAA,EAAa,CAAC,OAAA,CAAQ,MAAM,GAAG;IAEjD,MAAM,OAAO,CAAC;eAAG,uNAAA,MAAW,yNAAA,EAAY,QAAQ,CAAC;KAAC,CAChD,GAAA,CAAA,CAAK,IAAM,EAAE,QAAA,CAAS,GAAG,CAAC,QAAA,CAAS,GAAG,IAAI,CAAC,CAC3C,IAAA,CAAK,GAAG;IACV,IAAI,MAAM;IAEV,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IACvB,IAAI,SAAS,IAAA,CAAK,EAAA,EAAK,GAAG,IAAI,EAC7B,CAAA,OAAO,OAAA,CAAQ,EAAA,CAAI,WAAA,EAAa;SAEhC,OAAO,OAAA,CAAQ,EAAA;IAIjB,OAAO"}},
    {"offset": {"line": 528, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/utils/password.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/utils/password.ts"],"sourcesContent":["import type { GenericEndpointContext } from \"@better-auth/core\";\nimport { APIError } from \"better-call\";\n\nexport async function validatePassword(\n\tctx: GenericEndpointContext,\n\tdata: {\n\t\tpassword: string;\n\t\tuserId: string;\n\t},\n) {\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(data.userId);\n\tconst credentialAccount = accounts?.find(\n\t\t(account) => account.providerId === \"credential\",\n\t);\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword) {\n\t\treturn false;\n\t}\n\tconst compare = await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: data.password,\n\t});\n\treturn compare;\n}\n\nexport async function checkPassword(userId: string, c: GenericEndpointContext) {\n\tconst accounts = await c.context.internalAdapter.findAccounts(userId);\n\tconst credentialAccount = accounts?.find(\n\t\t(account) => account.providerId === \"credential\",\n\t);\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword || !c.body.password) {\n\t\tthrow new APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"No password credential found\",\n\t\t});\n\t}\n\tconst compare = await c.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: c.body.password,\n\t});\n\tif (!compare) {\n\t\tthrow new APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Invalid password\",\n\t\t});\n\t}\n\treturn true;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAGA,eAAsB,iBACrB,GAAA,EACA,IAAA,EAIC;IAED,MAAM,oBAAA,CADW,MAAM,IAAI,OAAA,CAAQ,eAAA,CAAgB,YAAA,CAAa,KAAK,MAAA,CAAO,GACxC,KAAA,CAClC,UAAY,QAAQ,UAAA,KAAe,aACpC;IACD,MAAM,kBAAkB,mBAAmB;IAC3C,IAAI,CAAC,qBAAqB,CAAC,gBAC1B,CAAA,OAAO;IAMR,OAJgB,MAAM,IAAI,OAAA,CAAQ,QAAA,CAAS,MAAA,CAAO;QACjD,MAAM;QACN,UAAU,KAAK,QAAA;KACf,CAAC;;AAIH,eAAsB,cAAc,MAAA,EAAgB,CAAA,EAA2B;IAE9E,MAAM,oBAAA,CADW,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,YAAA,CAAa,OAAO,GACjC,KAAA,CAClC,UAAY,QAAQ,UAAA,KAAe,aACpC;IACD,MAAM,kBAAkB,mBAAmB;IAC3C,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,EAAE,IAAA,CAAK,QAAA,CACrD,CAAA,MAAM,IAAI,4OAAA,CAAS,eAAe;QACjC,SAAS;IAAA,CACT,CAAC;IAMH,IAAI,CAJY,MAAM,EAAE,OAAA,CAAQ,QAAA,CAAS,MAAA,CAAO;QAC/C,MAAM;QACN,UAAU,EAAE,IAAA,CAAK,QAAA;KACjB,CAAC,CAED,CAAA,MAAM,IAAI,4OAAA,CAAS,eAAe;QACjC,SAAS;IAAA,CACT,CAAC;IAEH,OAAO"}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/crypto/jwt.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/crypto/jwt.ts"],"sourcesContent":["import { hkdf } from \"@noble/hashes/hkdf.js\";\nimport { sha256 } from \"@noble/hashes/sha2.js\";\nimport {\n\tbase64url,\n\tcalculateJwkThumbprint,\n\tEncryptJWT,\n\tjwtDecrypt,\n\tjwtVerify,\n\tSignJWT,\n} from \"jose\";\n\nexport async function signJWT(\n\tpayload: any,\n\tsecret: string,\n\texpiresIn: number = 3600,\n): Promise<string> {\n\tconst jwt = await new SignJWT(payload)\n\t\t.setProtectedHeader({ alg: \"HS256\" })\n\t\t.setIssuedAt()\n\t\t.setExpirationTime(Math.floor(Date.now() / 1000) + expiresIn)\n\t\t.sign(new TextEncoder().encode(secret));\n\n\treturn jwt;\n}\n\nexport async function verifyJWT<T = any>(\n\ttoken: string,\n\tsecret: string,\n): Promise<T | null> {\n\ttry {\n\t\tconst verified = await jwtVerify(token, new TextEncoder().encode(secret));\n\t\treturn verified.payload as T;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n// \"BetterAuth.js Generated Encryption Key\"\nconst info: Uint8Array = new Uint8Array([\n\t66, 101, 116, 116, 101, 114, 65, 117, 116, 104, 46, 106, 115, 32, 71, 101,\n\t110, 101, 114, 97, 116, 101, 100, 32, 69, 110, 99, 114, 121, 112, 116, 105,\n\t111, 110, 32, 75, 101, 121,\n]);\n\nconst now = () => (Date.now() / 1000) | 0;\n\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\"; // 64 bytes key\n\nexport async function symmetricEncodeJWT<T extends Record<string, any>>(\n\tpayload: T,\n\tsecret: string,\n\tsalt: string,\n\texpiresIn: number = 3600,\n): Promise<string> {\n\tconst encryptionSecret = hkdf(\n\t\tsha256,\n\t\tnew TextEncoder().encode(secret),\n\t\tnew TextEncoder().encode(salt),\n\t\tinfo,\n\t\t64,\n\t);\n\n\tconst thumbprint = await calculateJwkThumbprint(\n\t\t{ kty: \"oct\", k: base64url.encode(encryptionSecret) },\n\t\t\"sha256\",\n\t);\n\n\treturn await new EncryptJWT(payload)\n\t\t.setProtectedHeader({ alg, enc, kid: thumbprint })\n\t\t.setIssuedAt()\n\t\t.setExpirationTime(now() + expiresIn)\n\t\t.setJti(crypto.randomUUID())\n\t\t.encrypt(encryptionSecret);\n}\n\nexport async function symmetricDecodeJWT<T = any>(\n\ttoken: string,\n\tsecret: string,\n\tsalt: string,\n): Promise<T | null> {\n\tif (!token) return null;\n\ttry {\n\t\tconst { payload } = await jwtDecrypt(\n\t\t\ttoken,\n\t\t\tasync ({ kid }) => {\n\t\t\t\tconst encryptionSecret = hkdf(\n\t\t\t\t\tsha256,\n\t\t\t\t\tnew TextEncoder().encode(secret),\n\t\t\t\t\tnew TextEncoder().encode(salt),\n\t\t\t\t\tinfo,\n\t\t\t\t\t64,\n\t\t\t\t);\n\t\t\t\tif (kid === undefined) return encryptionSecret;\n\n\t\t\t\tconst thumbprint = await calculateJwkThumbprint(\n\t\t\t\t\t{ kty: \"oct\", k: base64url.encode(encryptionSecret) },\n\t\t\t\t\t\"sha256\",\n\t\t\t\t);\n\t\t\t\tif (kid === thumbprint) return encryptionSecret;\n\n\t\t\t\tthrow new Error(\"no matching decryption secret\");\n\t\t\t},\n\t\t\t{\n\t\t\t\tclockTolerance: 15,\n\t\t\t\tkeyManagementAlgorithms: [alg],\n\t\t\t\tcontentEncryptionAlgorithms: [enc, \"A256GCM\"],\n\t\t\t},\n\t\t);\n\t\treturn payload as T;\n\t} catch {\n\t\treturn null;\n\t}\n}\n"],"names":["info: Uint8Array"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAWA,eAAsB,QACrB,OAAA,EACA,MAAA,EACA,YAAoB,IAAA,EACF;IAOlB,OANY,MAAM,IAAI,mNAAA,CAAQ,QAAQ,CACpC,kBAAA,CAAmB;QAAE,KAAK;IAAA,CAAS,CAAC,CACpC,WAAA,EAAa,CACb,iBAAA,CAAkB,KAAK,KAAA,CAAM,KAAK,GAAA,EAAK,GAAG,IAAK,GAAG,UAAU,CAC5D,IAAA,CAAK,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,CAAC;;AAKzC,eAAsB,UACrB,KAAA,EACA,MAAA,EACoB;IACpB,IAAI;QAEH,OAAA,CADiB,UAAM,uNAAA,EAAU,OAAO,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,CAAC,EACzD,OAAA;aACT;QACP,OAAO;;;AAKT,MAAMA,OAAmB,IAAI,WAAW;IACvC;IAAI;IAAK;IAAK;IAAK;IAAK;IAAK;IAAI;IAAK;IAAK;IAAK;IAAI;IAAK;IAAK;IAAI;IAAI;IACtE;IAAK;IAAK;IAAK;IAAI;IAAK;IAAK;IAAK;IAAI;IAAI;IAAK;IAAI;IAAK;IAAK;IAAK;IAAK;IACvE;IAAK;IAAK;IAAI;IAAI;IAAK;CACvB,CAAC;AAEF,MAAM,MAAA,IAAa,KAAK,GAAA,EAAK,GAAG,MAAQ;AAExC,MAAM,MAAM;AACZ,MAAM,MAAM;AAEZ,eAAsB,mBACrB,OAAA,EACA,MAAA,EACA,IAAA,EACA,YAAoB,IAAA,EACF;IAClB,MAAM,uBAAmB,iNAAA,EACxB,mNAAA,EACA,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,EAChC,IAAI,aAAa,CAAC,MAAA,CAAO,KAAK,EAC9B,MACA,GACA;IAED,MAAM,aAAa,UAAM,wOAAA,EACxB;QAAE,KAAK;QAAO,GAAG,gQAAA,CAAU,MAAA,CAAO,iBAAiB;KAAE,EACrD,SACA;IAED,OAAO,MAAM,IAAI,yNAAA,CAAW,QAAQ,CAClC,kBAAA,CAAmB;QAAE;QAAK;QAAK,KAAK;KAAY,CAAC,CACjD,WAAA,EAAa,CACb,iBAAA,CAAkB,KAAK,GAAG,UAAU,CACpC,MAAA,CAAO,OAAO,UAAA,EAAY,CAAC,CAC3B,OAAA,CAAQ,iBAAiB;;AAG5B,eAAsB,mBACrB,KAAA,EACA,MAAA,EACA,IAAA,EACoB;IACpB,IAAI,CAAC,MAAO,CAAA,OAAO;IACnB,IAAI;QACH,MAAM,EAAE,OAAA,EAAA,GAAY,UAAM,yNAAA,EACzB,OACA,OAAO,EAAE,GAAA,EAAA,KAAU;YAClB,MAAM,uBAAmB,iNAAA,EACxB,mNAAA,EACA,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,EAChC,IAAI,aAAa,CAAC,MAAA,CAAO,KAAK,EAC9B,MACA,GACA;YACD,IAAI,QAAQ,KAAA,EAAW,CAAA,OAAO;YAM9B,IAAI,QAJe,UAAM,wOAAA,EACxB;gBAAE,KAAK;gBAAO,GAAG,gQAAA,CAAU,MAAA,CAAO,iBAAiB;aAAE,EACrD,SACA,CACuB,CAAA,OAAO;YAE/B,MAAM,IAAI,MAAM,gCAAgC;WAEjD;YACC,gBAAgB;YAChB,yBAAyB;gBAAC;aAAI;YAC9B,6BAA6B;gBAAC;gBAAK;aAAU;SAC7C,CACD;QACD,OAAO;aACA;QACP,OAAO"}},
    {"offset": {"line": 688, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/crypto/buffer.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/crypto/buffer.ts"],"sourcesContent":["/**\n * Compare two buffers in constant time.\n */\nexport function constantTimeEqual(\n\ta: ArrayBuffer | Uint8Array | string,\n\tb: ArrayBuffer | Uint8Array | string,\n): boolean {\n\tif (typeof a === \"string\") {\n\t\ta = new TextEncoder().encode(a);\n\t}\n\tif (typeof b === \"string\") {\n\t\tb = new TextEncoder().encode(b);\n\t}\n\tconst aBuffer = new Uint8Array(a);\n\tconst bBuffer = new Uint8Array(b);\n\tlet c = aBuffer.length ^ bBuffer.length;\n\tconst length = Math.max(aBuffer.length, bBuffer.length);\n\tfor (let i = 0; i < length; i++) {\n\t\tc |=\n\t\t\t(i < aBuffer.length ? aBuffer[i]! : 0) ^\n\t\t\t(i < bBuffer.length ? bBuffer[i]! : 0);\n\t}\n\treturn c === 0;\n}\n"],"names":[],"mappings":";;;;;;;GAGA,SAAgB,kBACf,CAAA,EACA,CAAA,EACU;IACV,IAAI,OAAO,MAAM,SAChB,CAAA,IAAI,IAAI,aAAa,CAAC,MAAA,CAAO,EAAE;IAEhC,IAAI,OAAO,MAAM,SAChB,CAAA,IAAI,IAAI,aAAa,CAAC,MAAA,CAAO,EAAE;IAEhC,MAAM,UAAU,IAAI,WAAW,EAAE;IACjC,MAAM,UAAU,IAAI,WAAW,EAAE;IACjC,IAAI,IAAI,QAAQ,MAAA,GAAS,QAAQ,MAAA;IACjC,MAAM,SAAS,KAAK,GAAA,CAAI,QAAQ,MAAA,EAAQ,QAAQ,MAAA,CAAO;IACvD,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IAC3B,KAAA,CACE,IAAI,QAAQ,MAAA,GAAS,OAAA,CAAQ,EAAA,GAAM,CAAA,IAAA,CACnC,IAAI,QAAQ,MAAA,GAAS,OAAA,CAAQ,EAAA,GAAM,CAAA;IAEtC,OAAO,MAAM"}},
    {"offset": {"line": 711, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/crypto/password.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/crypto/password.ts"],"sourcesContent":["import { BetterAuthError } from \"@better-auth/core/error\";\nimport { hex } from \"@better-auth/utils/hex\";\nimport { scryptAsync } from \"@noble/hashes/scrypt.js\";\nimport { hexToBytes } from \"@noble/hashes/utils.js\";\nimport { constantTimeEqual } from \"./buffer\";\n\nconst config = {\n\tN: 16384,\n\tr: 16,\n\tp: 1,\n\tdkLen: 64,\n};\n\nasync function generateKey(password: string, salt: string) {\n\treturn await scryptAsync(password.normalize(\"NFKC\"), salt, {\n\t\tN: config.N,\n\t\tp: config.p,\n\t\tr: config.r,\n\t\tdkLen: config.dkLen,\n\t\tmaxmem: 128 * config.N * config.r * 2,\n\t});\n}\n\nexport const hashPassword = async (password: string) => {\n\tconst salt = hex.encode(crypto.getRandomValues(new Uint8Array(16)));\n\tconst key = await generateKey(password, salt);\n\treturn `${salt}:${hex.encode(key)}`;\n};\n\nexport const verifyPassword = async ({\n\thash,\n\tpassword,\n}: {\n\thash: string;\n\tpassword: string;\n}) => {\n\tconst [salt, key] = hash.split(\":\");\n\tif (!salt || !key) {\n\t\tthrow new BetterAuthError(\"Invalid password hash\");\n\t}\n\tconst targetKey = await generateKey(password, salt!);\n\treturn constantTimeEqual(targetKey, hexToBytes(key));\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAMA,MAAM,SAAS;IACd,GAAG;IACH,GAAG;IACH,GAAG;IACH,OAAO;CACP;AAED,eAAe,YAAY,QAAA,EAAkB,IAAA,EAAc;IAC1D,OAAO,UAAM,0NAAA,EAAY,SAAS,SAAA,CAAU,OAAO,EAAE,MAAM;QAC1D,GAAG,OAAO,CAAA;QACV,GAAG,OAAO,CAAA;QACV,GAAG,OAAO,CAAA;QACV,OAAO,OAAO,KAAA;QACd,QAAQ,MAAM,OAAO,CAAA,GAAI,OAAO,CAAA,GAAI;KACpC,CAAC;;AAGH,MAAa,eAAe,OAAO,aAAqB;IACvD,MAAM,OAAO,wOAAA,CAAI,MAAA,CAAO,OAAO,eAAA,CAAgB,IAAI,WAAW,GAAG,CAAC,CAAC;IACnE,MAAM,MAAM,MAAM,YAAY,UAAU,KAAK;IAC7C,OAAO,GAAG,KAAK,CAAA,EAAG,wOAAA,CAAI,MAAA,CAAO,IAAI,EAAA;;AAGlC,MAAa,iBAAiB,OAAO,EACpC,IAAA,EACA,QAAA,EAAA,KAIK;IACL,MAAM,CAAC,MAAM,IAAA,GAAO,KAAK,KAAA,CAAM,IAAI;IACnC,IAAI,CAAC,QAAQ,CAAC,IACb,CAAA,MAAM,IAAI,gbAAA,CAAgB,wBAAwB;IAGnD,WAAO,8XAAA,EADW,MAAM,YAAY,UAAU,KAAM,MAChB,wNAAA,EAAW,IAAI,CAAC"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/crypto/random.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/crypto/random.ts"],"sourcesContent":["import { createRandomStringGenerator } from \"@better-auth/utils/random\";\nexport const generateRandomString = createRandomStringGenerator(\n\t\"a-z\",\n\t\"0-9\",\n\t\"A-Z\",\n\t\"-_\",\n);\n"],"names":[],"mappings":";;;;;;;AACA,MAAa,2BAAuB,mQAAA,EACnC,OACA,OACA,OACA,KACA"}},
    {"offset": {"line": 774, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/crypto/index.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/crypto/index.ts"],"sourcesContent":["import { getWebcryptoSubtle } from \"@better-auth/utils\";\nimport { createHash } from \"@better-auth/utils/hash\";\nimport { xchacha20poly1305 } from \"@noble/ciphers/chacha.js\";\nimport {\n\tbytesToHex,\n\thexToBytes,\n\tmanagedNonce,\n\tutf8ToBytes,\n} from \"@noble/ciphers/utils.js\";\n\nconst algorithm = { name: \"HMAC\", hash: \"SHA-256\" };\n\nexport type SymmetricEncryptOptions = {\n\tkey: string;\n\tdata: string;\n};\n\nexport const symmetricEncrypt = async ({\n\tkey,\n\tdata,\n}: SymmetricEncryptOptions) => {\n\tconst keyAsBytes = await createHash(\"SHA-256\").digest(key);\n\tconst dataAsBytes = utf8ToBytes(data);\n\tconst chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn bytesToHex(chacha.encrypt(dataAsBytes));\n};\n\nexport type SymmetricDecryptOptions = {\n\tkey: string;\n\tdata: string;\n};\n\nexport const symmetricDecrypt = async ({\n\tkey,\n\tdata,\n}: SymmetricDecryptOptions) => {\n\tconst keyAsBytes = await createHash(\"SHA-256\").digest(key);\n\tconst dataAsBytes = hexToBytes(data);\n\tconst chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\n\nexport const getCryptoKey = async (secret: string | BufferSource) => {\n\tconst secretBuf =\n\t\ttypeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await getWebcryptoSubtle().importKey(\n\t\t\"raw\",\n\t\tsecretBuf,\n\t\talgorithm,\n\t\tfalse,\n\t\t[\"sign\", \"verify\"],\n\t);\n};\n\nexport const makeSignature = async (\n\tvalue: string,\n\tsecret: string | BufferSource,\n): Promise<string> => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await getWebcryptoSubtle().sign(\n\t\talgorithm.name,\n\t\tkey,\n\t\tnew TextEncoder().encode(value),\n\t);\n\t// the returned base64 encoded signature will always be 44 characters long and end with one or two equal signs\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\nexport * from \"./buffer\";\nexport * from \"./jwt\";\nexport * from \"./password\";\nexport * from \"./random\";\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,MAAM,YAAY;IAAE,MAAM;IAAQ,MAAM;CAAW;AAOnD,MAAa,mBAAmB,OAAO,EACtC,GAAA,EACA,IAAA,EAAA,KAC8B;IAC9B,MAAM,aAAa,UAAM,gPAAA,EAAW,UAAU,CAAC,MAAA,CAAO,IAAI;IAC1D,MAAM,kBAAc,2NAAA,EAAY,KAAK;IAErC,WAAO,0NAAA,MADQ,4NAAA,EAAa,kOAAA,CAAkB,CAAC,IAAI,WAAW,WAAW,CAAC,CACjD,OAAA,CAAQ,YAAY,CAAC;;AAQ/C,MAAa,mBAAmB,OAAO,EACtC,GAAA,EACA,IAAA,EAAA,KAC8B;IAC9B,MAAM,aAAa,UAAM,gPAAA,EAAW,UAAU,CAAC,MAAA,CAAO,IAAI;IAC1D,MAAM,kBAAc,0NAAA,EAAW,KAAK;IACpC,MAAM,aAAS,4NAAA,EAAa,kOAAA,CAAkB,CAAC,IAAI,WAAW,WAAW,CAAC;IAC1E,OAAO,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,OAAA,CAAQ,YAAY,CAAC;;AAG7D,MAAa,eAAe,OAAO,WAAkC;IACpE,MAAM,YACL,OAAO,WAAW,WAAW,IAAI,aAAa,CAAC,MAAA,CAAO,OAAO,GAAG;IACjE,OAAO,UAAM,yPAAA,EAAoB,EAAC,SAAA,CACjC,OACA,WACA,WACA,OACA;QAAC;QAAQ;KAAS,CAClB;;AAGF,MAAa,gBAAgB,OAC5B,OACA,WACqB;IACrB,MAAM,MAAM,MAAM,aAAa,OAAO;IACtC,MAAM,YAAY,UAAM,yPAAA,EAAoB,EAAC,IAAA,CAC5C,UAAU,IAAA,EACV,KACA,IAAI,aAAa,CAAC,MAAA,CAAO,MAAM,CAC/B;IAED,OAAO,KAAK,OAAO,YAAA,CAAa,GAAG,IAAI,WAAW,UAAU,CAAC,CAAC"}},
    {"offset": {"line": 834, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/cookies/session-store.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/cookies/session-store.ts"],"sourcesContent":["import type { GenericEndpointContext } from \"@better-auth/core\";\nimport type { Account } from \"@better-auth/core/db\";\nimport type { InternalLogger } from \"@better-auth/core/env\";\nimport { safeJSONParse } from \"@better-auth/core/utils\";\nimport type { CookieOptions } from \"better-call\";\nimport * as z from \"zod\";\nimport { symmetricDecodeJWT, symmetricEncodeJWT } from \"../crypto\";\n\n// Cookie size constants based on browser limits\nconst ALLOWED_COOKIE_SIZE = 4096;\n// Estimated size of an empty cookie with all attributes\n// (name, path, domain, secure, httpOnly, sameSite, expires/maxAge)\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 200;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n\ninterface Cookie {\n\tname: string;\n\tvalue: string;\n\toptions: CookieOptions;\n}\n\ntype Chunks = Record<string, string>;\n\n/**\n * Parse cookies from the request headers\n */\nfunction parseCookiesFromContext(\n\tctx: GenericEndpointContext,\n): Record<string, string> {\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) {\n\t\treturn {};\n\t}\n\n\tconst cookies: Record<string, string> = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) {\n\t\t\tcookies[name] = valueParts.join(\"=\");\n\t\t}\n\t}\n\n\treturn cookies;\n}\n\n/**\n * Extract the chunk index from a cookie name\n */\nfunction getChunkIndex(cookieName: string): number {\n\tconst parts = cookieName.split(\".\");\n\tconst lastPart = parts[parts.length - 1];\n\tconst index = parseInt(lastPart || \"0\", 10);\n\treturn isNaN(index) ? 0 : index;\n}\n\n/**\n * Read all existing chunks from cookies\n */\nfunction readExistingChunks(\n\tcookieName: string,\n\tctx: GenericEndpointContext,\n): Chunks {\n\tconst chunks: Chunks = {};\n\tconst cookies = parseCookiesFromContext(ctx);\n\n\tfor (const [name, value] of Object.entries(cookies)) {\n\t\tif (name.startsWith(cookieName)) {\n\t\t\tchunks[name] = value;\n\t\t}\n\t}\n\n\treturn chunks;\n}\n\n/**\n * Get the full session data by joining all chunks\n */\nfunction joinChunks(chunks: Chunks): string {\n\tconst sortedKeys = Object.keys(chunks).sort((a, b) => {\n\t\tconst aIndex = getChunkIndex(a);\n\t\tconst bIndex = getChunkIndex(b);\n\t\treturn aIndex - bIndex;\n\t});\n\n\treturn sortedKeys.map((key) => chunks[key]).join(\"\");\n}\n\n/**\n * Split a cookie value into chunks if needed\n */\nfunction chunkCookie(\n\tstoreName: string,\n\tcookie: Cookie,\n\tchunks: Chunks,\n\tlogger: InternalLogger,\n): Cookie[] {\n\tconst chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n\n\tif (chunkCount === 1) {\n\t\tchunks[cookie.name] = cookie.value;\n\t\treturn [cookie];\n\t}\n\n\tconst cookies: Cookie[] = [];\n\tfor (let i = 0; i < chunkCount; i++) {\n\t\tconst name = `${cookie.name}.${i}`;\n\t\tconst start = i * CHUNK_SIZE;\n\t\tconst value = cookie.value.substring(start, start + CHUNK_SIZE);\n\t\tcookies.push({ ...cookie, name, value });\n\t\tchunks[name] = value;\n\t}\n\n\tlogger.debug(`CHUNKING_${storeName.toUpperCase()}_COOKIE`, {\n\t\tmessage: `${storeName} cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n\t\temptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n\t\tvalueSize: cookie.value.length,\n\t\tchunkCount,\n\t\tchunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE),\n\t});\n\n\treturn cookies;\n}\n\n/**\n * Get all cookies that should be cleaned (removed)\n */\nfunction getCleanCookies(\n\tchunks: Chunks,\n\tcookieOptions: CookieOptions,\n): Record<string, Cookie> {\n\tconst cleanedChunks: Record<string, Cookie> = {};\n\tfor (const name in chunks) {\n\t\tcleanedChunks[name] = {\n\t\t\tname,\n\t\t\tvalue: \"\",\n\t\t\toptions: { ...cookieOptions, maxAge: 0 },\n\t\t};\n\t}\n\treturn cleanedChunks;\n}\n\n/**\n * Create a session store for handling cookie chunking.\n * When session data exceeds 4KB, it automatically splits it into multiple cookies.\n *\n * Based on next-auth's SessionStore implementation.\n * @see https://github.com/nextauthjs/next-auth/blob/27b2519b84b8eb9cf053775dea29d577d2aa0098/packages/next-auth/src/core/lib/cookie.ts\n */\nconst storeFactory =\n\t(storeName: string) =>\n\t(\n\t\tcookieName: string,\n\t\tcookieOptions: CookieOptions,\n\t\tctx: GenericEndpointContext,\n\t) => {\n\t\tconst chunks = readExistingChunks(cookieName, ctx);\n\t\tconst logger = ctx.context.logger;\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Get the full session data by joining all chunks\n\t\t\t */\n\t\t\tgetValue(): string {\n\t\t\t\treturn joinChunks(chunks);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Check if there are existing chunks\n\t\t\t */\n\t\t\thasChunks(): boolean {\n\t\t\t\treturn Object.keys(chunks).length > 0;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Chunk a cookie value and return all cookies to set (including cleanup cookies)\n\t\t\t */\n\t\t\tchunk(value: string, options?: Partial<CookieOptions>): Cookie[] {\n\t\t\t\t// Start by cleaning all existing chunks\n\t\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\t\t// Clear the chunks object\n\t\t\t\tfor (const name in chunks) {\n\t\t\t\t\tdelete chunks[name];\n\t\t\t\t}\n\t\t\t\tconst cookies: Record<string, Cookie> = cleanedChunks;\n\n\t\t\t\t// Create new chunks\n\t\t\t\tconst chunked = chunkCookie(\n\t\t\t\t\tstoreName,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: cookieName,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\toptions: { ...cookieOptions, ...options },\n\t\t\t\t\t},\n\t\t\t\t\tchunks,\n\t\t\t\t\tlogger,\n\t\t\t\t);\n\n\t\t\t\t// Update with new chunks\n\t\t\t\tfor (const chunk of chunked) {\n\t\t\t\t\tcookies[chunk.name] = chunk;\n\t\t\t\t}\n\n\t\t\t\treturn Object.values(cookies);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get cookies to clean up all chunks\n\t\t\t */\n\t\t\tclean(): Cookie[] {\n\t\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\t\t// Clear the chunks object\n\t\t\t\tfor (const name in chunks) {\n\t\t\t\t\tdelete chunks[name];\n\t\t\t\t}\n\t\t\t\treturn Object.values(cleanedChunks);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Set all cookies in the context\n\t\t\t */\n\t\t\tsetCookies(cookies: Cookie[]): void {\n\t\t\t\tfor (const cookie of cookies) {\n\t\t\t\t\tctx.setCookie(cookie.name, cookie.value, cookie.options);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t};\n\nexport const createSessionStore = storeFactory(\"Session\");\nexport const createAccountStore = storeFactory(\"Account\");\n\nexport function getChunkedCookie(\n\tctx: GenericEndpointContext,\n\tcookieName: string,\n): string | null {\n\tconst value = ctx.getCookie(cookieName);\n\tif (value) {\n\t\treturn value;\n\t}\n\n\tconst chunks: Array<{ index: number; value: string }> = [];\n\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) {\n\t\treturn null;\n\t}\n\n\tconst cookies: Record<string, string> = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) {\n\t\t\tcookies[name] = valueParts.join(\"=\");\n\t\t}\n\t}\n\n\tfor (const [name, val] of Object.entries(cookies)) {\n\t\tif (name.startsWith(cookieName + \".\")) {\n\t\t\tconst parts = name.split(\".\");\n\t\t\tconst indexStr = parts.at(-1);\n\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\tif (!isNaN(index)) {\n\t\t\t\tchunks.push({ index, value: val });\n\t\t\t}\n\t\t}\n\t}\n\n\tif (chunks.length > 0) {\n\t\tchunks.sort((a, b) => a.index - b.index);\n\t\treturn chunks.map((c) => c.value).join(\"\");\n\t}\n\n\treturn null;\n}\n\nexport async function setAccountCookie(\n\tc: GenericEndpointContext,\n\taccountData: Record<string, any>,\n) {\n\tconst accountDataCookie = c.context.authCookies.accountData;\n\tconst options = {\n\t\tmaxAge: 60 * 5,\n\t\t...accountDataCookie.options,\n\t};\n\tconst data = await symmetricEncodeJWT(\n\t\taccountData,\n\t\tc.context.secret,\n\t\t\"better-auth-account\",\n\t\toptions.maxAge,\n\t);\n\n\tif (data.length > ALLOWED_COOKIE_SIZE) {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\n\t\tconst cookies = accountStore.chunk(data, options);\n\t\taccountStore.setCookies(cookies);\n\t} else {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tif (accountStore.hasChunks()) {\n\t\t\tconst cleanCookies = accountStore.clean();\n\t\t\taccountStore.setCookies(cleanCookies);\n\t\t}\n\t\tc.setCookie(accountDataCookie.name, data, options);\n\t}\n}\n\nexport async function getAccountCookie(c: GenericEndpointContext) {\n\tconst accountCookie = getChunkedCookie(\n\t\tc,\n\t\tc.context.authCookies.accountData.name,\n\t);\n\tif (accountCookie) {\n\t\tconst accountData = safeJSONParse<Account>(\n\t\t\tawait symmetricDecodeJWT(\n\t\t\t\taccountCookie,\n\t\t\t\tc.context.secret,\n\t\t\t\t\"better-auth-account\",\n\t\t\t),\n\t\t);\n\t\tif (accountData) {\n\t\t\treturn accountData;\n\t\t}\n\t}\n\n\treturn null;\n}\n\nexport const getSessionQuerySchema = z.optional(\n\tz.object({\n\t\t/**\n\t\t * If cookie cache is enabled, it will disable the cache\n\t\t * and fetch the session from the database\n\t\t */\n\t\tdisableCookieCache: z.coerce\n\t\t\t.boolean()\n\t\t\t.meta({\n\t\t\t\tdescription: \"Disable cookie cache and fetch session from database\",\n\t\t\t})\n\t\t\t.optional(),\n\t\tdisableRefresh: z.coerce\n\t\t\t.boolean()\n\t\t\t.meta({\n\t\t\t\tdescription:\n\t\t\t\t\t\"Disable session refresh. Useful for checking session status, without updating the session\",\n\t\t\t})\n\t\t\t.optional(),\n\t}),\n);\n"],"names":["cookies: Record<string, string>","chunks: Chunks","cookies: Cookie[]","cleanedChunks: Record<string, Cookie>","cookies: Record<string, Cookie>","chunks: Array<{ index: number; value: string }>"],"mappings":"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"}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/cookies/cookie-utils.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/cookies/cookie-utils.ts"],"sourcesContent":["interface CookieAttributes {\n\tvalue: string;\n\t\"max-age\"?: number | undefined;\n\texpires?: Date | undefined;\n\tdomain?: string | undefined;\n\tpath?: string | undefined;\n\tsecure?: boolean | undefined;\n\thttponly?: boolean | undefined;\n\tsamesite?: (\"strict\" | \"lax\" | \"none\") | undefined;\n\t[key: string]: any;\n}\n\nexport function parseSetCookieHeader(\n\tsetCookie: string,\n): Map<string, CookieAttributes> {\n\tconst cookies = new Map<string, CookieAttributes>();\n\tconst cookieArray = setCookie.split(\", \");\n\n\tcookieArray.forEach((cookieString) => {\n\t\tconst parts = cookieString.split(\";\").map((part) => part.trim());\n\t\tconst [nameValue, ...attributes] = parts;\n\t\tconst [name, ...valueParts] = (nameValue || \"\").split(\"=\");\n\n\t\tconst value = valueParts.join(\"=\");\n\n\t\tif (!name || value === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst attrObj: CookieAttributes = { value };\n\n\t\tattributes.forEach((attribute) => {\n\t\t\tconst [attrName, ...attrValueParts] = attribute!.split(\"=\");\n\t\t\tconst attrValue = attrValueParts.join(\"=\");\n\n\t\t\tconst normalizedAttrName = attrName!.trim().toLowerCase();\n\n\t\t\tswitch (normalizedAttrName) {\n\t\t\t\tcase \"max-age\":\n\t\t\t\t\tattrObj[\"max-age\"] = attrValue\n\t\t\t\t\t\t? parseInt(attrValue.trim(), 10)\n\t\t\t\t\t\t: undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expires\":\n\t\t\t\t\tattrObj.expires = attrValue ? new Date(attrValue.trim()) : undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"domain\":\n\t\t\t\t\tattrObj.domain = attrValue ? attrValue.trim() : undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"path\":\n\t\t\t\t\tattrObj.path = attrValue ? attrValue.trim() : undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"secure\":\n\t\t\t\t\tattrObj.secure = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"httponly\":\n\t\t\t\t\tattrObj.httponly = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"samesite\":\n\t\t\t\t\tattrObj.samesite = attrValue\n\t\t\t\t\t\t? (attrValue.trim().toLowerCase() as \"strict\" | \"lax\" | \"none\")\n\t\t\t\t\t\t: undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// Handle any other attributes\n\t\t\t\t\tattrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tcookies.set(name, attrObj);\n\t});\n\n\treturn cookies;\n}\n\nexport function setCookieToHeader(headers: Headers) {\n\treturn (context: { response: Response }) => {\n\t\tconst setCookieHeader = context.response.headers.get(\"set-cookie\");\n\t\tif (!setCookieHeader) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cookieMap = new Map<string, string>();\n\n\t\tconst existingCookiesHeader = headers.get(\"cookie\") || \"\";\n\t\texistingCookiesHeader.split(\";\").forEach((cookie) => {\n\t\t\tconst [name, ...rest] = cookie!.trim().split(\"=\");\n\t\t\tif (name && rest.length > 0) {\n\t\t\t\tcookieMap.set(name, rest.join(\"=\"));\n\t\t\t}\n\t\t});\n\n\t\tconst setCookieHeaders = setCookieHeader.split(\",\");\n\t\tsetCookieHeaders.forEach((header) => {\n\t\t\tconst cookies = parseSetCookieHeader(header);\n\t\t\tcookies.forEach((value, name) => {\n\t\t\t\tcookieMap.set(name, value.value);\n\t\t\t});\n\t\t});\n\n\t\tconst updatedCookies = Array.from(cookieMap.entries())\n\t\t\t.map(([name, value]) => `${name}=${value}`)\n\t\t\t.join(\"; \");\n\t\theaders.set(\"cookie\", updatedCookies);\n\t};\n}\n"],"names":["attrObj: CookieAttributes"],"mappings":";;;;;;;AAYA,SAAgB,qBACf,SAAA,EACgC;IAChC,MAAM,UAAA,aAAA,GAAU,IAAI,KAA+B;IAC/B,UAAU,KAAA,CAAM,KAAK,CAE7B,OAAA,CAAA,CAAS,iBAAiB;QAErC,MAAM,CAAC,WAAW,GAAG,WAAA,GADP,aAAa,KAAA,CAAM,IAAI,CAAC,GAAA,CAAA,CAAK,OAAS,KAAK,IAAA,EAAM,CAAC;QAEhE,MAAM,CAAC,MAAM,GAAG,WAAA,GAAA,CAAe,aAAa,EAAA,EAAI,KAAA,CAAM,IAAI;QAE1D,MAAM,QAAQ,WAAW,IAAA,CAAK,IAAI;QAElC,IAAI,CAAC,QAAQ,UAAU,KAAA,EACtB,CAAA;QAGD,MAAMA,UAA4B;YAAE;QAAA,CAAO;QAE3C,WAAW,OAAA,CAAA,CAAS,cAAc;YACjC,MAAM,CAAC,UAAU,GAAG,eAAA,GAAkB,UAAW,KAAA,CAAM,IAAI;YAC3D,MAAM,YAAY,eAAe,IAAA,CAAK,IAAI;YAE1C,MAAM,qBAAqB,SAAU,IAAA,EAAM,CAAC,WAAA,EAAa;YAEzD,OAAQ,oBAAR;gBACC,KAAK;oBACJ,OAAA,CAAQ,UAAA,GAAa,YAClB,SAAS,UAAU,IAAA,EAAM,EAAE,GAAG,GAC9B,KAAA;oBACH;gBACD,KAAK;oBACJ,QAAQ,OAAA,GAAU,YAAY,IAAI,KAAK,UAAU,IAAA,EAAM,CAAC,GAAG,KAAA;oBAC3D;gBACD,KAAK;oBACJ,QAAQ,MAAA,GAAS,YAAY,UAAU,IAAA,EAAM,GAAG,KAAA;oBAChD;gBACD,KAAK;oBACJ,QAAQ,IAAA,GAAO,YAAY,UAAU,IAAA,EAAM,GAAG,KAAA;oBAC9C;gBACD,KAAK;oBACJ,QAAQ,MAAA,GAAS;oBACjB;gBACD,KAAK;oBACJ,QAAQ,QAAA,GAAW;oBACnB;gBACD,KAAK;oBACJ,QAAQ,QAAA,GAAW,YACf,UAAU,IAAA,EAAM,CAAC,WAAA,EAAa,GAC/B,KAAA;oBACH;gBACD;oBAEC,OAAA,CAAQ,mBAAA,GAAsB,YAAY,UAAU,IAAA,EAAM,GAAG;oBAC7D;;UAED;QAEF,QAAQ,GAAA,CAAI,MAAM,QAAQ;MACzB;IAEF,OAAO;;AAGR,SAAgB,kBAAkB,OAAA,EAAkB;IACnD,OAAA,CAAQ,YAAoC;QAC3C,MAAM,kBAAkB,QAAQ,QAAA,CAAS,OAAA,CAAQ,GAAA,CAAI,aAAa;QAClE,IAAI,CAAC,gBACJ,CAAA;QAGD,MAAM,YAAA,aAAA,GAAY,IAAI,KAAqB;QAG3C,CAD8B,QAAQ,GAAA,CAAI,SAAS,IAAI,EAAA,EACjC,KAAA,CAAM,IAAI,CAAC,OAAA,CAAA,CAAS,WAAW;YACpD,MAAM,CAAC,MAAM,GAAG,KAAA,GAAQ,OAAQ,IAAA,EAAM,CAAC,KAAA,CAAM,IAAI;YACjD,IAAI,QAAQ,KAAK,MAAA,GAAS,EACzB,CAAA,UAAU,GAAA,CAAI,MAAM,KAAK,IAAA,CAAK,IAAI,CAAC;UAEnC;QAEuB,gBAAgB,KAAA,CAAM,IAAI,CAClC,OAAA,CAAA,CAAS,WAAW;YACpB,qBAAqB,OAAO,CACpC,OAAA,CAAA,CAAS,OAAO,SAAS;gBAChC,UAAU,GAAA,CAAI,MAAM,MAAM,KAAA,CAAM;cAC/B;UACD;QAEF,MAAM,iBAAiB,MAAM,IAAA,CAAK,UAAU,OAAA,EAAS,CAAC,CACpD,GAAA,CAAA,CAAK,CAAC,MAAM,MAAA,GAAW,GAAG,KAAK,CAAA,EAAG,OAAA,CAAQ,CAC1C,IAAA,CAAK,KAAK;QACZ,QAAQ,GAAA,CAAI,UAAU,eAAe"}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/cookies/index.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/cookies/index.ts"],"sourcesContent":["import type {\n\tBetterAuthCookies,\n\tBetterAuthOptions,\n\tGenericEndpointContext,\n} from \"@better-auth/core\";\nimport { env, isProduction } from \"@better-auth/core/env\";\nimport { BetterAuthError } from \"@better-auth/core/error\";\nimport { safeJSONParse } from \"@better-auth/core/utils\";\nimport { base64Url } from \"@better-auth/utils/base64\";\nimport { binary } from \"@better-auth/utils/binary\";\nimport { createHMAC } from \"@better-auth/utils/hmac\";\nimport type { CookieOptions } from \"better-call\";\nimport {\n\tsignJWT,\n\tsymmetricDecodeJWT,\n\tsymmetricEncodeJWT,\n\tverifyJWT,\n} from \"../crypto/jwt\";\nimport { parseUserOutput } from \"../db/schema\";\nimport type { Session, User } from \"../types\";\nimport { getDate } from \"../utils/date\";\nimport { sec } from \"../utils/time\";\nimport { createAccountStore, createSessionStore } from \"./session-store\";\n\nexport function createCookieGetter(options: BetterAuthOptions) {\n\tconst secure =\n\t\toptions.advanced?.useSecureCookies !== undefined\n\t\t\t? options.advanced?.useSecureCookies\n\t\t\t: options.baseURL !== undefined\n\t\t\t\t? options.baseURL.startsWith(\"https://\")\n\t\t\t\t\t? true\n\t\t\t\t\t: false\n\t\t\t\t: isProduction;\n\tconst secureCookiePrefix = secure ? \"__Secure-\" : \"\";\n\tconst crossSubdomainEnabled =\n\t\t!!options.advanced?.crossSubDomainCookies?.enabled;\n\tconst domain = crossSubdomainEnabled\n\t\t? options.advanced?.crossSubDomainCookies?.domain ||\n\t\t\t(options.baseURL ? new URL(options.baseURL).hostname : undefined)\n\t\t: undefined;\n\tif (crossSubdomainEnabled && !domain) {\n\t\tthrow new BetterAuthError(\n\t\t\t\"baseURL is required when crossSubdomainCookies are enabled\",\n\t\t);\n\t}\n\tfunction createCookie(\n\t\tcookieName: string,\n\t\toverrideAttributes: Partial<CookieOptions> = {},\n\t) {\n\t\tconst prefix = options.advanced?.cookiePrefix || \"better-auth\";\n\t\tconst name =\n\t\t\toptions.advanced?.cookies?.[cookieName as \"session_token\"]?.name ||\n\t\t\t`${prefix}.${cookieName}`;\n\n\t\tconst attributes =\n\t\t\toptions.advanced?.cookies?.[cookieName as \"session_token\"]?.attributes;\n\n\t\treturn {\n\t\t\tname: `${secureCookiePrefix}${name}`,\n\t\t\tattributes: {\n\t\t\t\tsecure: !!secureCookiePrefix,\n\t\t\t\tsameSite: \"lax\",\n\t\t\t\tpath: \"/\",\n\t\t\t\thttpOnly: true,\n\t\t\t\t...(crossSubdomainEnabled ? { domain } : {}),\n\t\t\t\t...options.advanced?.defaultCookieAttributes,\n\t\t\t\t...overrideAttributes,\n\t\t\t\t...attributes,\n\t\t\t} as CookieOptions,\n\t\t};\n\t}\n\treturn createCookie;\n}\n\nexport function getCookies(options: BetterAuthOptions) {\n\tconst createCookie = createCookieGetter(options);\n\tconst sessionMaxAge = options.session?.expiresIn || sec(\"7d\");\n\tconst sessionToken = createCookie(\"session_token\", {\n\t\tmaxAge: sessionMaxAge,\n\t});\n\tconst sessionData = createCookie(\"session_data\", {\n\t\tmaxAge: options.session?.cookieCache?.maxAge || 60 * 5,\n\t});\n\tconst accountData = createCookie(\"account_data\", {\n\t\tmaxAge: options.session?.cookieCache?.maxAge || 60 * 5,\n\t});\n\tconst dontRememberToken = createCookie(\"dont_remember\");\n\treturn {\n\t\tsessionToken: {\n\t\t\tname: sessionToken.name,\n\t\t\toptions: sessionToken.attributes,\n\t\t},\n\t\t/**\n\t\t * This cookie is used to store the session data in the cookie\n\t\t * This is useful for when you want to cache the session in the cookie\n\t\t */\n\t\tsessionData: {\n\t\t\tname: sessionData.name,\n\t\t\toptions: sessionData.attributes,\n\t\t},\n\t\tdontRememberToken: {\n\t\t\tname: dontRememberToken.name,\n\t\t\toptions: dontRememberToken.attributes,\n\t\t},\n\t\taccountData: {\n\t\t\tname: accountData.name,\n\t\t\toptions: accountData.attributes,\n\t\t},\n\t};\n}\n\nexport async function setCookieCache(\n\tctx: GenericEndpointContext,\n\tsession: {\n\t\tsession: Session & Record<string, any>;\n\t\tuser: User;\n\t},\n\tdontRememberMe: boolean,\n) {\n\tconst shouldStoreSessionDataInCookie =\n\t\tctx.context.options.session?.cookieCache?.enabled;\n\n\tif (shouldStoreSessionDataInCookie) {\n\t\tconst filteredSession = Object.entries(session.session).reduce(\n\t\t\t(acc, [key, value]) => {\n\t\t\t\tconst fieldConfig =\n\t\t\t\t\tctx.context.options.session?.additionalFields?.[key];\n\t\t\t\tif (!fieldConfig || fieldConfig.returned !== false) {\n\t\t\t\t\tacc[key] = value;\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{} as Record<string, any>,\n\t\t);\n\n\t\t// Apply field filtering to user data\n\t\tconst filteredUser = parseUserOutput(ctx.context.options, session.user);\n\n\t\t// Compute version\n\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\tlet version = \"1\"; // default version\n\t\tif (versionConfig) {\n\t\t\tif (typeof versionConfig === \"string\") {\n\t\t\t\tversion = versionConfig;\n\t\t\t} else if (typeof versionConfig === \"function\") {\n\t\t\t\tconst result = versionConfig(session.session, session.user);\n\t\t\t\tversion = result instanceof Promise ? await result : result;\n\t\t\t}\n\t\t}\n\n\t\tconst sessionData = {\n\t\t\tsession: filteredSession,\n\t\t\tuser: filteredUser,\n\t\t\tupdatedAt: Date.now(),\n\t\t\tversion,\n\t\t};\n\n\t\tconst options = {\n\t\t\t...ctx.context.authCookies.sessionData.options,\n\t\t\tmaxAge: dontRememberMe\n\t\t\t\t? undefined\n\t\t\t\t: ctx.context.authCookies.sessionData.options.maxAge,\n\t\t};\n\n\t\tconst expiresAtDate = getDate(options.maxAge || 60, \"sec\").getTime();\n\t\tconst strategy =\n\t\t\tctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\n\t\tlet data: string;\n\n\t\tif (strategy === \"jwe\") {\n\t\t\t// Use JWE strategy (JSON Web Encryption) with A256CBC-HS512 + HKDF\n\t\t\tdata = await symmetricEncodeJWT(\n\t\t\t\tsessionData,\n\t\t\t\tctx.context.secret,\n\t\t\t\t\"better-auth-session\",\n\t\t\t\toptions.maxAge || 60 * 5,\n\t\t\t);\n\t\t} else if (strategy === \"jwt\") {\n\t\t\t// Use JWT strategy with HMAC-SHA256 signature (HS256), no encryption\n\t\t\tdata = await signJWT(\n\t\t\t\tsessionData,\n\t\t\t\tctx.context.secret,\n\t\t\t\toptions.maxAge || 60 * 5,\n\t\t\t);\n\t\t} else {\n\t\t\t// Use compact strategy (base64url + HMAC, no JWT spec overhead)\n\t\t\t// Also handles legacy \"base64-hmac\" for backward compatibility\n\t\t\tdata = base64Url.encode(\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tsession: sessionData,\n\t\t\t\t\texpiresAt: expiresAtDate,\n\t\t\t\t\tsignature: await createHMAC(\"SHA-256\", \"base64urlnopad\").sign(\n\t\t\t\t\t\tctx.context.secret,\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t...sessionData,\n\t\t\t\t\t\t\texpiresAt: expiresAtDate,\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\tpadding: false,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\t// Check if we need to chunk the cookie (only if it exceeds 4093 bytes)\n\t\tif (data.length > 4093) {\n\t\t\tconst sessionStore = createSessionStore(\n\t\t\t\tctx.context.authCookies.sessionData.name,\n\t\t\t\toptions,\n\t\t\t\tctx,\n\t\t\t);\n\n\t\t\tconst cookies = sessionStore.chunk(data, options);\n\t\t\tsessionStore.setCookies(cookies);\n\t\t} else {\n\t\t\tconst sessionStore = createSessionStore(\n\t\t\t\tctx.context.authCookies.sessionData.name,\n\t\t\t\toptions,\n\t\t\t\tctx,\n\t\t\t);\n\n\t\t\tif (sessionStore.hasChunks()) {\n\t\t\t\tconst cleanCookies = sessionStore.clean();\n\t\t\t\tsessionStore.setCookies(cleanCookies);\n\t\t\t}\n\n\t\t\tctx.setCookie(ctx.context.authCookies.sessionData.name, data, options);\n\t\t}\n\t}\n}\n\nexport async function setSessionCookie(\n\tctx: GenericEndpointContext,\n\tsession: {\n\t\tsession: Session & Record<string, any>;\n\t\tuser: User;\n\t},\n\tdontRememberMe?: boolean | undefined,\n\toverrides?: Partial<CookieOptions> | undefined,\n) {\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(\n\t\tctx.context.authCookies.dontRememberToken.name,\n\t\tctx.context.secret,\n\t);\n\t// if dontRememberMe is not set, use the cookie value\n\tdontRememberMe =\n\t\tdontRememberMe !== undefined ? dontRememberMe : !!dontRememberMeCookie;\n\n\tconst options = ctx.context.authCookies.sessionToken.options;\n\tconst maxAge = dontRememberMe\n\t\t? undefined\n\t\t: ctx.context.sessionConfig.expiresIn;\n\tawait ctx.setSignedCookie(\n\t\tctx.context.authCookies.sessionToken.name,\n\t\tsession.session.token,\n\t\tctx.context.secret,\n\t\t{\n\t\t\t...options,\n\t\t\tmaxAge,\n\t\t\t...overrides,\n\t\t},\n\t);\n\n\tif (dontRememberMe) {\n\t\tawait ctx.setSignedCookie(\n\t\t\tctx.context.authCookies.dontRememberToken.name,\n\t\t\t\"true\",\n\t\t\tctx.context.secret,\n\t\t\tctx.context.authCookies.dontRememberToken.options,\n\t\t);\n\t}\n\tawait setCookieCache(ctx, session, dontRememberMe);\n\tctx.context.setNewSession(session);\n\t/**\n\t * If secondary storage is enabled, store the session data in the secondary storage\n\t * This is useful if the session got updated and we want to update the session data in the\n\t * secondary storage\n\t */\n\tif (ctx.context.options.secondaryStorage) {\n\t\tawait ctx.context.secondaryStorage?.set(\n\t\t\tsession.session.token,\n\t\t\tJSON.stringify({\n\t\t\t\tuser: session.user,\n\t\t\t\tsession: session.session,\n\t\t\t}),\n\t\t\tMath.floor(\n\t\t\t\t(new Date(session.session.expiresAt).getTime() - Date.now()) / 1000,\n\t\t\t),\n\t\t);\n\t}\n}\n\nexport function deleteSessionCookie(\n\tctx: GenericEndpointContext,\n\tskipDontRememberMe?: boolean | undefined,\n) {\n\tctx.setCookie(ctx.context.authCookies.sessionToken.name, \"\", {\n\t\t...ctx.context.authCookies.sessionToken.options,\n\t\tmaxAge: 0,\n\t});\n\n\tctx.setCookie(ctx.context.authCookies.sessionData.name, \"\", {\n\t\t...ctx.context.authCookies.sessionData.options,\n\t\tmaxAge: 0,\n\t});\n\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\tctx.setCookie(ctx.context.authCookies.accountData.name, \"\", {\n\t\t\t...ctx.context.authCookies.accountData.options,\n\t\t\tmaxAge: 0,\n\t\t});\n\n\t\t//clean up the account data chunks\n\t\tconst accountStore = createAccountStore(\n\t\t\tctx.context.authCookies.accountData.name,\n\t\t\tctx.context.authCookies.accountData.options,\n\t\t\tctx,\n\t\t);\n\t\tconst cleanCookies = accountStore.clean();\n\t\taccountStore.setCookies(cleanCookies);\n\t}\n\n\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") {\n\t\tconst stateCookie = ctx.context.createAuthCookie(\"oauth_state\");\n\t\tctx.setCookie(stateCookie.name, \"\", {\n\t\t\t...stateCookie.attributes,\n\t\t\tmaxAge: 0,\n\t\t});\n\t}\n\n\t// Use createSessionStore to clean up all session data chunks\n\tconst sessionStore = createSessionStore(\n\t\tctx.context.authCookies.sessionData.name,\n\t\tctx.context.authCookies.sessionData.options,\n\t\tctx,\n\t);\n\tconst cleanCookies = sessionStore.clean();\n\tsessionStore.setCookies(cleanCookies);\n\n\tif (!skipDontRememberMe) {\n\t\tctx.setCookie(ctx.context.authCookies.dontRememberToken.name, \"\", {\n\t\t\t...ctx.context.authCookies.dontRememberToken.options,\n\t\t\tmaxAge: 0,\n\t\t});\n\t}\n}\n\nexport function parseCookies(cookieHeader: string) {\n\tconst cookies = cookieHeader.split(\"; \");\n\tconst cookieMap = new Map<string, string>();\n\n\tcookies.forEach((cookie) => {\n\t\tconst [name, value] = cookie.split(/=(.*)/s);\n\t\tcookieMap.set(name!, value!);\n\t});\n\treturn cookieMap;\n}\n\nexport type EligibleCookies = (string & {}) | (keyof BetterAuthCookies & {});\n\nexport const getSessionCookie = (\n\trequest: Request | Headers,\n\tconfig?:\n\t\t| {\n\t\t\t\tcookiePrefix?: string;\n\t\t\t\tcookieName?: string;\n\t\t\t\tpath?: string;\n\t\t  }\n\t\t| undefined,\n) => {\n\tif (config?.cookiePrefix) {\n\t\tif (config.cookieName) {\n\t\t\tconfig.cookiePrefix = `${config.cookiePrefix}-`;\n\t\t} else {\n\t\t\tconfig.cookiePrefix = `${config.cookiePrefix}.`;\n\t\t}\n\t}\n\tconst headers = \"headers\" in request ? request.headers : request;\n\tconst cookies = headers.get(\"cookie\");\n\tif (!cookies) {\n\t\treturn null;\n\t}\n\tconst { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } =\n\t\tconfig || {};\n\tconst name = `${cookiePrefix}${cookieName}`;\n\tconst secureCookieName = `__Secure-${name}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tconst sessionToken =\n\t\tparsedCookie.get(name) || parsedCookie.get(secureCookieName);\n\tif (sessionToken) {\n\t\treturn sessionToken;\n\t}\n\n\treturn null;\n};\n\nexport const getCookieCache = async <\n\tS extends {\n\t\tsession: Session & Record<string, any>;\n\t\tuser: User & Record<string, any>;\n\t\tupdatedAt: number;\n\t\tversion?: string;\n\t},\n>(\n\trequest: Request | Headers,\n\tconfig?:\n\t\t| {\n\t\t\t\tcookiePrefix?: string;\n\t\t\t\tcookieName?: string;\n\t\t\t\tisSecure?: boolean;\n\t\t\t\tsecret?: string;\n\t\t\t\tstrategy?: \"compact\" | \"jwt\" | \"jwe\"; // base64-hmac for backward compatibility\n\t\t\t\tversion?:\n\t\t\t\t\t| string\n\t\t\t\t\t| ((\n\t\t\t\t\t\t\tsession: Session & Record<string, any>,\n\t\t\t\t\t\t\tuser: User & Record<string, any>,\n\t\t\t\t\t  ) => string)\n\t\t\t\t\t| ((\n\t\t\t\t\t\t\tsession: Session & Record<string, any>,\n\t\t\t\t\t\t\tuser: User & Record<string, any>,\n\t\t\t\t\t  ) => Promise<string>);\n\t\t  }\n\t\t| undefined,\n) => {\n\tconst headers = request instanceof Headers ? request : request.headers;\n\tconst cookies = headers.get(\"cookie\");\n\tif (!cookies) {\n\t\treturn null;\n\t}\n\tconst { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } =\n\t\tconfig || {};\n\tconst name =\n\t\tconfig?.isSecure !== undefined\n\t\t\t? config.isSecure\n\t\t\t\t? `__Secure-${cookiePrefix}.${cookieName}`\n\t\t\t\t: `${cookiePrefix}.${cookieName}`\n\t\t\t: isProduction\n\t\t\t\t? `__Secure-${cookiePrefix}.${cookieName}`\n\t\t\t\t: `${cookiePrefix}.${cookieName}`;\n\tconst parsedCookie = parseCookies(cookies);\n\n\t// Check for chunked cookies\n\tlet sessionData = parsedCookie.get(name);\n\tif (!sessionData) {\n\t\t// Try to reconstruct from chunks\n\t\tconst chunks: Array<{ index: number; value: string }> = [];\n\t\tfor (const [cookieName, value] of parsedCookie.entries()) {\n\t\t\tif (cookieName.startsWith(name + \".\")) {\n\t\t\t\tconst parts = cookieName.split(\".\");\n\t\t\t\tconst indexStr = parts[parts.length - 1];\n\t\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\t\tif (!isNaN(index)) {\n\t\t\t\t\tchunks.push({ index, value });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (chunks.length > 0) {\n\t\t\t// Sort by index and join\n\t\t\tchunks.sort((a, b) => a.index - b.index);\n\t\t\tsessionData = chunks.map((c) => c.value).join(\"\");\n\t\t}\n\t}\n\n\tif (sessionData) {\n\t\tconst secret = config?.secret || env.BETTER_AUTH_SECRET;\n\t\tif (!secret) {\n\t\t\tthrow new BetterAuthError(\n\t\t\t\t\"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\",\n\t\t\t);\n\t\t}\n\n\t\tconst strategy = config?.strategy || \"compact\";\n\n\t\tif (strategy === \"jwe\") {\n\t\t\t// Use JWE strategy (encrypted)\n\t\t\tconst payload = await symmetricDecodeJWT<S>(\n\t\t\t\tsessionData,\n\t\t\t\tsecret,\n\t\t\t\t\"better-auth-session\",\n\t\t\t);\n\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\t// Validate version if provided\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") {\n\t\t\t\t\t\texpectedVersion = config.version;\n\t\t\t\t\t} else if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else if (strategy === \"jwt\") {\n\t\t\t// Use JWT strategy with HMAC signature (HS256), no encryption\n\t\t\tconst payload = await verifyJWT<S>(sessionData, secret);\n\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\t// Validate version if provided\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") {\n\t\t\t\t\t\texpectedVersion = config.version;\n\t\t\t\t\t} else if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// Use compact strategy (or legacy base64-hmac)\n\t\t\tconst sessionDataPayload = safeJSONParse<{\n\t\t\t\tsession: S;\n\t\t\t\texpiresAt: number;\n\t\t\t\tsignature: string;\n\t\t\t}>(binary.decode(base64Url.decode(sessionData)));\n\t\t\tif (!sessionDataPayload) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst isValid = await createHMAC(\"SHA-256\", \"base64urlnopad\").verify(\n\t\t\t\tsecret,\n\t\t\t\tJSON.stringify({\n\t\t\t\t\t...sessionDataPayload.session,\n\t\t\t\t\texpiresAt: sessionDataPayload.expiresAt,\n\t\t\t\t}),\n\t\t\t\tsessionDataPayload.signature,\n\t\t\t);\n\t\t\tif (!isValid) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Validate version if provided\n\t\t\tif (config?.version && sessionDataPayload.session) {\n\t\t\t\tconst cookieVersion = sessionDataPayload.session.version || \"1\";\n\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\tif (typeof config.version === \"string\") {\n\t\t\t\t\texpectedVersion = config.version;\n\t\t\t\t} else if (typeof config.version === \"function\") {\n\t\t\t\t\tconst result = config.version(\n\t\t\t\t\t\tsessionDataPayload.session.session,\n\t\t\t\t\t\tsessionDataPayload.session.user,\n\t\t\t\t\t);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t\tif (cookieVersion !== expectedVersion) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn sessionDataPayload.session;\n\t\t}\n\t}\n\treturn null;\n};\n\nexport * from \"./cookie-utils\";\nexport { createSessionStore, getChunkedCookie } from \"./session-store\";\n"],"names":["data: string","cleanCookies","chunks: Array<{ index: number; value: string }>","cookieName"],"mappings":"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"}},
    {"offset": {"line": 1455, "column": 0}, "map": {"version":3,"sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs"],"sourcesContent":["//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") {\n\t\tfor (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\t\tkey = keys[i];\n\t\t\tif (!__hasOwnProp.call(to, key) && key !== except) {\n\t\t\t\t__defProp(to, key, {\n\t\t\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn to;\n};\nvar __reExport = (target, mod, secondTarget, symbols) => {\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t\tsecondTarget && __defProp(secondTarget, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\t__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\");\n};\n\n//#endregion\nexport { __export, __reExport };"],"names":[],"mappings":";;;;;;AAAA,0BAA0B;AAC1B,IAAI,YAAY,OAAO,cAAc;AACrC,IAAI,mBAAmB,OAAO,wBAAwB;AACtD,IAAI,oBAAoB,OAAO,mBAAmB;AAClD,IAAI,eAAe,OAAO,SAAS,CAAC,cAAc;AAClD,IAAI,WAAW,CAAC,KAAK;IACpB,IAAI,SAAS,CAAC;IACd,IAAK,IAAI,QAAQ,IAAK;QACrB,UAAU,QAAQ,MAAM;YACvB,KAAK,GAAG,CAAC,KAAK;YACd,YAAY;QACb;IACD;IACA,IAAI,SAAS;QACZ,UAAU,QAAQ,OAAO,WAAW,EAAE;YAAE,OAAO;QAAS;IACzD;IACA,OAAO;AACR;AACA,IAAI,cAAc,CAAC,IAAI,MAAM,QAAQ;IACpC,IAAI,QAAQ,OAAO,SAAS,YAAY,OAAO,SAAS,YAAY;QACnE,IAAK,IAAI,OAAO,kBAAkB,OAAO,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,KAAK,IAAI,GAAG,IAAK;YACjF,MAAM,IAAI,CAAC,EAAE;YACb,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,QAAQ,QAAQ,QAAQ;gBAClD,UAAU,IAAI,KAAK;oBAClB,KAAK,CAAC,CAAC,IAAM,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM;oBACjC,YAAY,CAAC,CAAC,OAAO,iBAAiB,MAAM,IAAI,KAAK,KAAK,UAAU;gBACrE;YACD;QACD;IACD;IACA,OAAO;AACR;AACA,IAAI,aAAa,CAAC,QAAQ,KAAK,cAAc;IAC5C,IAAI,SAAS;QACZ,UAAU,QAAQ,OAAO,WAAW,EAAE;YAAE,OAAO;QAAS;QACxD,gBAAgB,UAAU,cAAc,OAAO,WAAW,EAAE;YAAE,OAAO;QAAS;IAC/E;IACA,YAAY,QAAQ,KAAK,YAAY,gBAAgB,YAAY,cAAc,KAAK;AACrF","ignoreList":[0]}},
    {"offset": {"line": 1511, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/adapters/kysely-adapter/dialect.ts"],"sourcesContent":["import type { BetterAuthOptions } from \"@better-auth/core\";\nimport type { Dialect } from \"kysely\";\nimport {\n\tKysely,\n\tMssqlDialect,\n\tMysqlDialect,\n\tPostgresDialect,\n\tSqliteDialect,\n} from \"kysely\";\nimport type { KyselyDatabaseType } from \"./types\";\n\nexport function getKyselyDatabaseType(\n\tdb: BetterAuthOptions[\"database\"],\n): KyselyDatabaseType | null {\n\tif (!db) {\n\t\treturn null;\n\t}\n\tif (\"dialect\" in db) {\n\t\treturn getKyselyDatabaseType(db.dialect as Dialect);\n\t}\n\tif (\"createDriver\" in db) {\n\t\tif (db instanceof SqliteDialect) {\n\t\t\treturn \"sqlite\";\n\t\t}\n\t\tif (db instanceof MysqlDialect) {\n\t\t\treturn \"mysql\";\n\t\t}\n\t\tif (db instanceof PostgresDialect) {\n\t\t\treturn \"postgres\";\n\t\t}\n\t\tif (db instanceof MssqlDialect) {\n\t\t\treturn \"mssql\";\n\t\t}\n\t}\n\tif (\"aggregate\" in db) {\n\t\treturn \"sqlite\";\n\t}\n\n\tif (\"getConnection\" in db) {\n\t\treturn \"mysql\";\n\t}\n\tif (\"connect\" in db) {\n\t\treturn \"postgres\";\n\t}\n\tif (\"fileControl\" in db) {\n\t\treturn \"sqlite\";\n\t}\n\tif (\"open\" in db && \"close\" in db && \"prepare\" in db) {\n\t\treturn \"sqlite\";\n\t}\n\treturn null;\n}\n\nexport const createKyselyAdapter = async (config: BetterAuthOptions) => {\n\tconst db = config.database;\n\n\tif (!db) {\n\t\treturn {\n\t\t\tkysely: null,\n\t\t\tdatabaseType: null,\n\t\t\ttransaction: undefined,\n\t\t};\n\t}\n\n\tif (\"db\" in db) {\n\t\treturn {\n\t\t\tkysely: db.db,\n\t\t\tdatabaseType: db.type,\n\t\t\ttransaction: db.transaction,\n\t\t};\n\t}\n\n\tif (\"dialect\" in db) {\n\t\treturn {\n\t\t\tkysely: new Kysely<any>({ dialect: db.dialect }),\n\t\t\tdatabaseType: db.type,\n\t\t\ttransaction: db.transaction,\n\t\t};\n\t}\n\n\tlet dialect: Dialect | undefined = undefined;\n\n\tconst databaseType = getKyselyDatabaseType(db);\n\n\tif (\"createDriver\" in db) {\n\t\tdialect = db;\n\t}\n\n\tif (\"aggregate\" in db && !(\"createSession\" in db)) {\n\t\tdialect = new SqliteDialect({\n\t\t\tdatabase: db,\n\t\t});\n\t}\n\n\tif (\"getConnection\" in db) {\n\t\t// @ts-expect-error - mysql2/promise\n\t\tdialect = new MysqlDialect(db);\n\t}\n\n\tif (\"connect\" in db) {\n\t\tdialect = new PostgresDialect({\n\t\t\tpool: db,\n\t\t});\n\t}\n\n\tif (\"fileControl\" in db) {\n\t\tconst { BunSqliteDialect } = await import(\"./bun-sqlite-dialect\");\n\t\tdialect = new BunSqliteDialect({\n\t\t\tdatabase: db,\n\t\t});\n\t}\n\n\tif (\"createSession\" in db && typeof window === \"undefined\") {\n\t\tlet DatabaseSync: typeof import(\"node:sqlite\").DatabaseSync | undefined =\n\t\t\tundefined;\n\t\ttry {\n\t\t\tlet nodeSqlite: string = \"node:sqlite\";\n\t\t\t// Ignore both Vite and Webpack for dynamic import as they both try to pre-bundle 'node:sqlite' which might fail\n\t\t\t// It's okay because we are in a try-catch block\n\t\t\t({ DatabaseSync } = await import(\n\t\t\t\t/* @vite-ignore */\n\t\t\t\t/* webpackIgnore: true */\n\t\t\t\tnodeSqlite\n\t\t\t));\n\t\t} catch (error: unknown) {\n\t\t\tif (\n\t\t\t\terror !== null &&\n\t\t\t\ttypeof error === \"object\" &&\n\t\t\t\t\"code\" in error &&\n\t\t\t\terror.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\"\n\t\t\t) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t\tif (DatabaseSync && db instanceof DatabaseSync) {\n\t\t\tconst { NodeSqliteDialect } = await import(\"./node-sqlite-dialect\");\n\t\t\tdialect = new NodeSqliteDialect({\n\t\t\t\tdatabase: db,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tkysely: dialect ? new Kysely<any>({ dialect }) : null,\n\t\tdatabaseType,\n\t\ttransaction: undefined,\n\t};\n};\n"],"names":["dialect: Dialect | undefined","DatabaseSync: typeof import(\"node:sqlite\").DatabaseSync | undefined","nodeSqlite: string","error: unknown"],"mappings":";;;;;;;;;;;;;AAWA,SAAgB,sBACf,EAAA,EAC4B;IAC5B,IAAI,CAAC,GACJ,CAAA,OAAO;IAER,IAAI,aAAa,GAChB,CAAA,OAAO,sBAAsB,GAAG,OAAA,CAAmB;IAEpD,IAAI,kBAAkB,IAAI;QACzB,IAAI,cAAc,uPAAA,CACjB,CAAA,OAAO;QAER,IAAI,cAAc,oPAAA,CACjB,CAAA,OAAO;QAER,IAAI,cAAc,6PAAA,CACjB,CAAA,OAAO;QAER,IAAI,cAAc,oPAAA,CACjB,CAAA,OAAO;;IAGT,IAAI,eAAe,GAClB,CAAA,OAAO;IAGR,IAAI,mBAAmB,GACtB,CAAA,OAAO;IAER,IAAI,aAAa,GAChB,CAAA,OAAO;IAER,IAAI,iBAAiB,GACpB,CAAA,OAAO;IAER,IAAI,UAAU,MAAM,WAAW,MAAM,aAAa,GACjD,CAAA,OAAO;IAER,OAAO;;AAGR,MAAa,sBAAsB,OAAO,WAA8B;IACvE,MAAM,KAAK,OAAO,QAAA;IAElB,IAAI,CAAC,GACJ,CAAA,OAAO;QACN,QAAQ;QACR,cAAc;QACd,aAAa,KAAA;KACb;IAGF,IAAI,QAAQ,GACX,CAAA,OAAO;QACN,QAAQ,GAAG,EAAA;QACX,cAAc,GAAG,IAAA;QACjB,aAAa,GAAG,WAAA;KAChB;IAGF,IAAI,aAAa,GAChB,CAAA,OAAO;QACN,QAAQ,IAAI,gNAAA,CAAY;YAAE,SAAS,GAAG,OAAA;QAAA,CAAS,CAAC;QAChD,cAAc,GAAG,IAAA;QACjB,aAAa,GAAG,WAAA;KAChB;IAGF,IAAIA,UAA+B,KAAA;IAEnC,MAAM,eAAe,sBAAsB,GAAG;IAE9C,IAAI,kBAAkB,GACrB,CAAA,UAAU;IAGX,IAAI,eAAe,MAAM,CAAA,CAAE,mBAAmB,EAAA,EAC7C,CAAA,UAAU,IAAI,uPAAA,CAAc;QAC3B,UAAU;IAAA,CACV,CAAC;IAGH,IAAI,mBAAmB,GAEtB,CAAA,UAAU,IAAI,oPAAA,CAAa,GAAG;IAG/B,IAAI,aAAa,GAChB,CAAA,UAAU,IAAI,6PAAA,CAAgB;QAC7B,MAAM;IAAA,CACN,CAAC;IAGH,IAAI,iBAAiB,IAAI;QACxB,MAAM,EAAE,gBAAA,EAAA,GAAqB,MAAM,OAAO;QAC1C,UAAU,IAAI,iBAAiB;YAC9B,UAAU;QAAA,CACV,CAAC;;IAGH,IAAI,mBAAmB,MAAM,OAAO,2CAAW,aAAa;QAC3D,IAAIC,eACH,KAAA;QACD,IAAI;YACH,IAAIC,aAAqB;YAGzB,CAAC,EAAE,YAAA,EAAA,GAAiB,MAAM,MAAA,8CAGzB;iBAEOC,OAAgB;YACxB,IACC,UAAU,QACV,OAAO,UAAU,YACjB,UAAU,SACV,MAAM,IAAA,KAAS,6BAEf,CAAA,MAAM;;QAGR,IAAI,gBAAgB,cAAc,cAAc;YAC/C,MAAM,EAAE,iBAAA,EAAA,GAAsB,MAAM,OAAO;YAC3C,UAAU,IAAI,kBAAkB;gBAC/B,UAAU;YAAA,CACV,CAAC;;;IAIJ,OAAO;QACN,QAAQ,UAAU,IAAI,gNAAA,CAAY;YAAE;QAAA,CAAS,CAAC,GAAG;QACjD;QACA,aAAa,KAAA;KACb"}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/oauth2/state.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/oauth2/state.ts"],"sourcesContent":["import type { GenericEndpointContext } from \"@better-auth/core\";\nimport { APIError } from \"better-call\";\nimport * as z from \"zod\";\nimport { setOAuthState } from \"../api/middlewares/oauth\";\nimport {\n\tgenerateRandomString,\n\tsymmetricDecrypt,\n\tsymmetricEncrypt,\n} from \"../crypto\";\n\nexport async function generateState(\n\tc: GenericEndpointContext,\n\tlink:\n\t\t| {\n\t\t\t\temail: string;\n\t\t\t\tuserId: string;\n\t\t  }\n\t\t| undefined,\n\tadditionalData: Record<string, any> | false | undefined,\n) {\n\tconst callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n\tif (!callbackURL) {\n\t\tthrow new APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"callbackURL is required\",\n\t\t});\n\t}\n\n\tconst codeVerifier = generateRandomString(128);\n\tconst state = generateRandomString(32);\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\n\tconst stateData = {\n\t\t...(additionalData ? additionalData : {}),\n\t\tcallbackURL,\n\t\tcodeVerifier,\n\t\terrorURL: c.body?.errorCallbackURL,\n\t\tnewUserURL: c.body?.newUserCallbackURL,\n\t\tlink,\n\t\t/**\n\t\t * This is the actual expiry time of the state\n\t\t */\n\t\texpiresAt: Date.now() + 10 * 60 * 1000,\n\t\trequestSignUp: c.body?.requestSignUp,\n\t\tstate,\n\t};\n\n\tawait setOAuthState(stateData);\n\n\tif (storeStateStrategy === \"cookie\") {\n\t\t// Store state data in an encrypted cookie\n\t\tconst encryptedData = await symmetricEncrypt({\n\t\t\tkey: c.context.secret,\n\t\t\tdata: JSON.stringify(stateData),\n\t\t});\n\n\t\tconst stateCookie = c.context.createAuthCookie(\"oauth_state\", {\n\t\t\tmaxAge: 10 * 60 * 1000, // 10 minutes\n\t\t});\n\n\t\tc.setCookie(stateCookie.name, encryptedData, stateCookie.attributes);\n\n\t\treturn {\n\t\t\tstate,\n\t\t\tcodeVerifier,\n\t\t};\n\t}\n\n\t// Default: database strategy\n\tconst stateCookie = c.context.createAuthCookie(\"state\", {\n\t\tmaxAge: 5 * 60 * 1000, // 5 minutes\n\t});\n\tawait c.setSignedCookie(\n\t\tstateCookie.name,\n\t\tstate,\n\t\tc.context.secret,\n\t\tstateCookie.attributes,\n\t);\n\n\tconst expiresAt = new Date();\n\texpiresAt.setMinutes(expiresAt.getMinutes() + 10);\n\tconst verification = await c.context.internalAdapter.createVerificationValue({\n\t\tvalue: JSON.stringify(stateData),\n\t\tidentifier: state,\n\t\texpiresAt,\n\t});\n\tif (!verification) {\n\t\tc.context.logger.error(\n\t\t\t\"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\",\n\t\t);\n\t\tthrow new APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\tmessage: \"Unable to create verification\",\n\t\t});\n\t}\n\treturn {\n\t\tstate: verification.identifier,\n\t\tcodeVerifier,\n\t};\n}\n\nexport async function parseState(c: GenericEndpointContext) {\n\tconst state = c.query.state || c.body.state;\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\n\tconst stateDataSchema = z.looseObject({\n\t\tcallbackURL: z.string(),\n\t\tcodeVerifier: z.string(),\n\t\terrorURL: z.string().optional(),\n\t\tnewUserURL: z.string().optional(),\n\t\texpiresAt: z.number(),\n\t\tlink: z\n\t\t\t.object({\n\t\t\t\temail: z.string(),\n\t\t\t\tuserId: z.coerce.string(),\n\t\t\t})\n\t\t\t.optional(),\n\t\trequestSignUp: z.boolean().optional(),\n\t\tstate: z.string().optional(),\n\t});\n\n\tlet parsedData: z.infer<typeof stateDataSchema>;\n\t/**\n\t * This is generally cause security issue and should only be used in\n\t * dev or staging environments. It's currently used by the oauth-proxy\n\t * plugin\n\t */\n\tconst skipStateCookieCheck = c.context.oauthConfig?.skipStateCookieCheck;\n\tif (storeStateStrategy === \"cookie\") {\n\t\t// Retrieve state data from encrypted cookie\n\t\tconst stateCookie = c.context.createAuthCookie(\"oauth_state\");\n\t\tconst encryptedData = c.getCookie(stateCookie.name);\n\n\t\tif (!encryptedData) {\n\t\t\tc.context.logger.error(\"State Mismatch. OAuth state cookie not found\", {\n\t\t\t\tstate,\n\t\t\t});\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\n\t\ttry {\n\t\t\tconst decryptedData = await symmetricDecrypt({\n\t\t\t\tkey: c.context.secret,\n\t\t\t\tdata: encryptedData,\n\t\t\t});\n\n\t\t\tparsedData = stateDataSchema.parse(JSON.parse(decryptedData));\n\t\t} catch (error) {\n\t\t\tc.context.logger.error(\"Failed to decrypt or parse OAuth state cookie\", {\n\t\t\t\terror,\n\t\t\t});\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\n\t\tconst skipStateCookieCheck = c.context.oauthConfig?.skipStateCookieCheck;\n\t\tif (\n\t\t\t!skipStateCookieCheck &&\n\t\t\tparsedData.state &&\n\t\t\tparsedData.state !== state\n\t\t) {\n\t\t\tc.context.logger.error(\"State Mismatch. State parameter does not match\", {\n\t\t\t\texpected: parsedData.state,\n\t\t\t\treceived: state,\n\t\t\t});\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=state_mismatch`);\n\t\t}\n\n\t\t// Clear the cookie after successful parsing\n\t\tc.setCookie(stateCookie.name, \"\", {\n\t\t\tmaxAge: 0,\n\t\t});\n\t} else {\n\t\t// Default: database strategy\n\t\tconst data = await c.context.internalAdapter.findVerificationValue(state);\n\t\tif (!data) {\n\t\t\tc.context.logger.error(\"State Mismatch. Verification not found\", {\n\t\t\t\tstate,\n\t\t\t});\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\n\t\tparsedData = stateDataSchema.parse(JSON.parse(data.value));\n\n\t\tconst stateCookie = c.context.createAuthCookie(\"state\");\n\t\tconst stateCookieValue = await c.getSignedCookie(\n\t\t\tstateCookie.name,\n\t\t\tc.context.secret,\n\t\t);\n\n\t\tif (\n\t\t\t!skipStateCookieCheck &&\n\t\t\t(!stateCookieValue || stateCookieValue !== state)\n\t\t) {\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=state_mismatch`);\n\t\t}\n\t\tc.setCookie(stateCookie.name, \"\", {\n\t\t\tmaxAge: 0,\n\t\t});\n\n\t\t// Delete verification value after retrieval\n\t\tawait c.context.internalAdapter.deleteVerificationValue(data.id);\n\t}\n\n\tif (!parsedData.errorURL) {\n\t\tparsedData.errorURL =\n\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t}\n\n\t// Check expiration\n\tif (parsedData.expiresAt < Date.now()) {\n\t\tconst errorURL =\n\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t}\n\n\tif (parsedData) {\n\t\tawait setOAuthState(parsedData);\n\t}\n\n\treturn parsedData;\n}\n"],"names":["stateCookie","parsedData: z.infer<typeof stateDataSchema>"],"mappings":"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"}},
    {"offset": {"line": 1770, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/oauth2/utils.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/oauth2/utils.ts"],"sourcesContent":["import type { AuthContext } from \"@better-auth/core\";\nimport { symmetricDecrypt, symmetricEncrypt } from \"../crypto\";\n\nexport function decryptOAuthToken(token: string, ctx: AuthContext) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) {\n\t\treturn symmetricDecrypt({\n\t\t\tkey: ctx.secret,\n\t\t\tdata: token,\n\t\t});\n\t}\n\treturn token;\n}\n\nexport function setTokenUtil(\n\ttoken: string | null | undefined,\n\tctx: AuthContext,\n) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) {\n\t\treturn symmetricEncrypt({\n\t\t\tkey: ctx.secret,\n\t\t\tdata: token,\n\t\t});\n\t}\n\treturn token;\n}\n"],"names":[],"mappings":";;;;;;;;;AAGA,SAAgB,kBAAkB,KAAA,EAAe,GAAA,EAAkB;IAClE,IAAI,CAAC,MAAO,CAAA,OAAO;IACnB,IAAI,IAAI,OAAA,CAAQ,OAAA,EAAS,mBACxB,CAAA,WAAO,4YAAA,EAAiB;QACvB,KAAK,IAAI,MAAA;QACT,MAAM;KACN,CAAC;IAEH,OAAO;;AAGR,SAAgB,aACf,KAAA,EACA,GAAA,EACC;IACD,IAAI,IAAI,OAAA,CAAQ,OAAA,EAAS,sBAAsB,MAC9C,CAAA,WAAO,4YAAA,EAAiB;QACvB,KAAK,IAAI,MAAA;QACT,MAAM;KACN,CAAC;IAEH,OAAO"}},
    {"offset": {"line": 1800, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/oauth2/link-account.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/oauth2/link-account.ts"],"sourcesContent":["import type { GenericEndpointContext } from \"@better-auth/core\";\nimport { isDevelopment, logger } from \"@better-auth/core/env\";\nimport { APIError, createEmailVerificationToken } from \"../api\";\nimport { setAccountCookie } from \"../cookies/session-store\";\nimport type { Account, User } from \"../types\";\nimport { setTokenUtil } from \"./utils\";\n\nexport async function handleOAuthUserInfo(\n\tc: GenericEndpointContext,\n\topts: {\n\t\tuserInfo: Omit<User, \"createdAt\" | \"updatedAt\">;\n\t\taccount: Omit<Account, \"id\" | \"userId\" | \"createdAt\" | \"updatedAt\">;\n\t\tcallbackURL?: string | undefined;\n\t\tdisableSignUp?: boolean | undefined;\n\t\toverrideUserInfo?: boolean | undefined;\n\t\tisTrustedProvider?: boolean | undefined;\n\t},\n) {\n\tconst { userInfo, account, callbackURL, disableSignUp, overrideUserInfo } =\n\t\topts;\n\tconst dbUser = await c.context.internalAdapter\n\t\t.findOAuthUser(\n\t\t\tuserInfo.email.toLowerCase(),\n\t\t\taccount.accountId,\n\t\t\taccount.providerId,\n\t\t)\n\t\t.catch((e) => {\n\t\t\tlogger.error(\n\t\t\t\t\"Better auth was unable to query your database.\\nError: \",\n\t\t\t\te,\n\t\t\t);\n\t\t\tconst errorURL =\n\t\t\t\tc.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t\t});\n\tlet user = dbUser?.user;\n\tlet isRegister = !user;\n\n\tif (dbUser) {\n\t\tconst hasBeenLinked = dbUser.accounts.find(\n\t\t\t(a) =>\n\t\t\t\ta.providerId === account.providerId &&\n\t\t\t\ta.accountId === account.accountId,\n\t\t);\n\t\tif (!hasBeenLinked) {\n\t\t\tconst trustedProviders =\n\t\t\t\tc.context.options.account?.accountLinking?.trustedProviders;\n\t\t\tconst isTrustedProvider =\n\t\t\t\topts.isTrustedProvider ||\n\t\t\t\ttrustedProviders?.includes(account.providerId as \"apple\");\n\t\t\tif (\n\t\t\t\t(!isTrustedProvider && !userInfo.emailVerified) ||\n\t\t\t\tc.context.options.account?.accountLinking?.enabled === false\n\t\t\t) {\n\t\t\t\tif (isDevelopment()) {\n\t\t\t\t\tlogger.warn(\n\t\t\t\t\t\t`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null,\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope,\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tlogger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tuserInfo.emailVerified &&\n\t\t\t\t!dbUser.user.emailVerified &&\n\t\t\t\tuserInfo.email.toLowerCase() === dbUser.user.email\n\t\t\t) {\n\t\t\t\tawait c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t\temailVerified: true,\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (c.context.options.account?.updateAccountOnSignIn !== false) {\n\t\t\t\tconst updateData = Object.fromEntries(\n\t\t\t\t\tObject.entries({\n\t\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\t\tscope: account.scope,\n\t\t\t\t\t}).filter(([_, value]) => value !== undefined),\n\t\t\t\t);\n\t\t\t\tif (c.context.options.account?.storeAccountCookie) {\n\t\t\t\t\tawait setAccountCookie(c, {\n\t\t\t\t\t\t...account,\n\t\t\t\t\t\t...updateData,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(updateData).length > 0) {\n\t\t\t\t\tawait c.context.internalAdapter.updateAccount(\n\t\t\t\t\t\thasBeenLinked.id,\n\t\t\t\t\t\tupdateData,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tuserInfo.emailVerified &&\n\t\t\t\t!dbUser.user.emailVerified &&\n\t\t\t\tuserInfo.email.toLowerCase() === dbUser.user.email\n\t\t\t) {\n\t\t\t\tawait c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t\temailVerified: true,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\t// update user info from the provider if overrideUserInfo is true\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified:\n\t\t\t\t\tuserInfo.email.toLowerCase() === dbUser.user.email\n\t\t\t\t\t\t? dbUser.user.emailVerified || userInfo.emailVerified\n\t\t\t\t\t\t: userInfo.emailVerified,\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) {\n\t\t\treturn {\n\t\t\t\terror: \"signup disabled\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false,\n\t\t\t};\n\t\t}\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await setTokenUtil(account.accessToken, c.context),\n\t\t\t\trefreshToken: await setTokenUtil(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } =\n\t\t\t\tawait c.context.internalAdapter.createOAuthUser(\n\t\t\t\t\t{\n\t\t\t\t\t\t...restUserInfo,\n\t\t\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\t\t},\n\t\t\t\t\taccountData,\n\t\t\t\t);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) {\n\t\t\t\tawait setAccountCookie(c, createdAccount);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!userInfo.emailVerified &&\n\t\t\t\tuser &&\n\t\t\t\tc.context.options.emailVerification?.sendOnSignUp &&\n\t\t\t\tc.context.options.emailVerification?.sendVerificationEmail\n\t\t\t) {\n\t\t\t\tconst token = await createEmailVerificationToken(\n\t\t\t\t\tc.context.secret,\n\t\t\t\t\tuser.email,\n\t\t\t\t\tundefined,\n\t\t\t\t\tc.context.options.emailVerification?.expiresIn,\n\t\t\t\t);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.runInBackgroundOrAwait(\n\t\t\t\t\tc.context.options.emailVerification.sendVerificationEmail(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuser,\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tc.request,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (e: any) {\n\t\t\tlogger.error(e);\n\t\t\tif (e instanceof APIError) {\n\t\t\t\treturn {\n\t\t\t\t\terror: e.message,\n\t\t\t\t\tdata: null,\n\t\t\t\t\tisRegister: false,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false,\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) {\n\t\treturn {\n\t\t\terror: \"unable to create user\",\n\t\t\tdata: null,\n\t\t\tisRegister: false,\n\t\t};\n\t}\n\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) {\n\t\treturn {\n\t\t\terror: \"unable to create session\",\n\t\t\tdata: null,\n\t\t\tisRegister: false,\n\t\t};\n\t}\n\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser,\n\t\t},\n\t\terror: null,\n\t\tisRegister,\n\t};\n}\n"],"names":["e: any"],"mappings":";;;;;;;;;;;;;;;;;;AAOA,eAAsB,oBACrB,CAAA,EACA,IAAA,EAQC;IACD,MAAM,EAAE,QAAA,EAAU,OAAA,EAAS,WAAA,EAAa,aAAA,EAAe,gBAAA,EAAA,GACtD;IACD,MAAM,SAAS,MAAM,EAAE,OAAA,CAAQ,eAAA,CAC7B,aAAA,CACA,SAAS,KAAA,CAAM,WAAA,EAAa,EAC5B,QAAQ,SAAA,EACR,QAAQ,UAAA,CACR,CACA,KAAA,CAAA,CAAO,MAAM;QACb,4ZAAA,CAAO,KAAA,CACN,2DACA,EACA;QACD,MAAM,WACL,EAAE,OAAA,CAAQ,OAAA,CAAQ,UAAA,EAAY,YAAY,GAAG,EAAE,OAAA,CAAQ,OAAA,CAAQ,MAAA,CAAA;QAChE,MAAM,EAAE,QAAA,CAAS,GAAG,SAAS,4BAAA,CAAA,CAA8B;MAC1D;IACH,IAAI,OAAO,QAAQ;IACnB,IAAI,aAAa,CAAC;IAElB,IAAI,QAAQ;QACX,MAAM,gBAAgB,OAAO,QAAA,CAAS,IAAA,CAAA,CACpC,IACA,EAAE,UAAA,KAAe,QAAQ,UAAA,IACzB,EAAE,SAAA,KAAc,QAAQ,SAAA,CACzB;QACD,IAAI,CAAC,eAAe;YACnB,MAAM,mBACL,EAAE,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,gBAAgB;YAI5C,IACE,CAAA,CAHD,KAAK,iBAAA,IACL,kBAAkB,SAAS,QAAQ,UAAA,CAAsB,KAElC,CAAC,SAAS,aAAA,IACjC,EAAE,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,gBAAgB,YAAY,OACtD;gBACD,QAAI,0aAAA,EAAe,CAClB,EAAA,4ZAAA,CAAO,IAAA,CACN,CAAA,+CAAA,EAAkD,QAAQ,UAAA,CAAW,2IAAA,CAAA,CACrE;gBAEF,OAAO;oBACN,OAAO;oBACP,MAAM;iBACN;;YAEF,IAAI;gBACH,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,WAAA,CAAY;oBAC3C,YAAY,QAAQ,UAAA;oBACpB,WAAW,SAAS,EAAA,CAAG,QAAA,EAAU;oBACjC,QAAQ,OAAO,IAAA,CAAK,EAAA;oBACpB,aAAa,UAAM,wXAAA,EAAa,QAAQ,WAAA,EAAa,EAAE,OAAA,CAAQ;oBAC/D,cAAc,UAAM,wXAAA,EAAa,QAAQ,YAAA,EAAc,EAAE,OAAA,CAAQ;oBACjE,SAAS,QAAQ,OAAA;oBACjB,sBAAsB,QAAQ,oBAAA;oBAC9B,uBAAuB,QAAQ,qBAAA;oBAC/B,OAAO,QAAQ,KAAA;iBACf,CAAC;qBACM,GAAG;gBACX,4ZAAA,CAAO,KAAA,CAAM,0BAA0B,EAAE;gBACzC,OAAO;oBACN,OAAO;oBACP,MAAM;iBACN;;YAGF,IACC,SAAS,aAAA,IACT,CAAC,OAAO,IAAA,CAAK,aAAA,IACb,SAAS,KAAA,CAAM,WAAA,EAAa,KAAK,OAAO,IAAA,CAAK,KAAA,CAE7C,CAAA,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,UAAA,CAAW,OAAO,IAAA,CAAK,EAAA,EAAI;gBAC1D,eAAe;YAAA,CACf,CAAC;eAEG;YACN,IAAI,EAAE,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,0BAA0B,OAAO;gBAC/D,MAAM,aAAa,OAAO,WAAA,CACzB,OAAO,OAAA,CAAQ;oBACd,SAAS,QAAQ,OAAA;oBACjB,aAAa,UAAM,wXAAA,EAAa,QAAQ,WAAA,EAAa,EAAE,OAAA,CAAQ;oBAC/D,cAAc,UAAM,wXAAA,EAAa,QAAQ,YAAA,EAAc,EAAE,OAAA,CAAQ;oBACjE,sBAAsB,QAAQ,oBAAA;oBAC9B,uBAAuB,QAAQ,qBAAA;oBAC/B,OAAO,QAAQ,KAAA;iBACf,CAAC,CAAC,MAAA,CAAA,CAAQ,CAAC,GAAG,MAAA,GAAW,UAAU,KAAA,EAAU,CAC9C;gBACD,IAAI,EAAE,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,mBAC9B,CAAA,UAAM,wYAAA,EAAiB,GAAG;oBACzB,GAAG,OAAA;oBACH,GAAG,UAAA;iBACH,CAAC;gBAGH,IAAI,OAAO,IAAA,CAAK,WAAW,CAAC,MAAA,GAAS,EACpC,CAAA,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,aAAA,CAC/B,cAAc,EAAA,EACd,WACA;;YAIH,IACC,SAAS,aAAA,IACT,CAAC,OAAO,IAAA,CAAK,aAAA,IACb,SAAS,KAAA,CAAM,WAAA,EAAa,KAAK,OAAO,IAAA,CAAK,KAAA,CAE7C,CAAA,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,UAAA,CAAW,OAAO,IAAA,CAAK,EAAA,EAAI;gBAC1D,eAAe;YAAA,CACf,CAAC;;QAGJ,IAAI,kBAAkB;YACrB,MAAM,EAAE,IAAI,CAAA,EAAG,GAAG,cAAA,GAAiB;YAEnC,OAAO,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,UAAA,CAAW,OAAO,IAAA,CAAK,EAAA,EAAI;gBACjE,GAAG,YAAA;gBACH,OAAO,SAAS,KAAA,CAAM,WAAA,EAAa;gBACnC,eACC,SAAS,KAAA,CAAM,WAAA,EAAa,KAAK,OAAO,IAAA,CAAK,KAAA,GAC1C,OAAO,IAAA,CAAK,aAAA,IAAiB,SAAS,aAAA,GACtC,SAAS,aAAA;aACb,CAAC;;WAEG;QACN,IAAI,cACH,CAAA,OAAO;YACN,OAAO;YACP,MAAM;YACN,YAAY;SACZ;QAEF,IAAI;YACH,MAAM,EAAE,IAAI,CAAA,EAAG,GAAG,cAAA,GAAiB;YACnC,MAAM,cAAc;gBACnB,aAAa,UAAM,wXAAA,EAAa,QAAQ,WAAA,EAAa,EAAE,OAAA,CAAQ;gBAC/D,cAAc,UAAM,wXAAA,EAAa,QAAQ,YAAA,EAAc,EAAE,OAAA,CAAQ;gBACjE,SAAS,QAAQ,OAAA;gBACjB,sBAAsB,QAAQ,oBAAA;gBAC9B,uBAAuB,QAAQ,qBAAA;gBAC/B,OAAO,QAAQ,KAAA;gBACf,YAAY,QAAQ,UAAA;gBACpB,WAAW,SAAS,EAAA,CAAG,QAAA,EAAU;aACjC;YACD,MAAM,EAAE,MAAM,WAAA,EAAa,SAAS,cAAA,EAAA,GACnC,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,eAAA,CAC/B;gBACC,GAAG,YAAA;gBACH,OAAO,SAAS,KAAA,CAAM,WAAA,EAAa;aACnC,EACD,YACA;YACF,OAAO;YACP,IAAI,EAAE,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,mBAC9B,CAAA,UAAM,wYAAA,EAAiB,GAAG,eAAe;YAE1C,IACC,CAAC,SAAS,aAAA,IACV,QACA,EAAE,OAAA,CAAQ,OAAA,CAAQ,iBAAA,EAAmB,gBACrC,EAAE,OAAA,CAAQ,OAAA,CAAQ,iBAAA,EAAmB,uBACpC;gBACD,MAAM,QAAQ,UAAM,+ZAAA,EACnB,EAAE,OAAA,CAAQ,MAAA,EACV,KAAK,KAAA,EACL,KAAA,GACA,EAAE,OAAA,CAAQ,OAAA,CAAQ,iBAAA,EAAmB,UACrC;gBACD,MAAM,MAAM,GAAG,EAAE,OAAA,CAAQ,OAAA,CAAQ,oBAAA,EAAsB,MAAM,aAAA,EAAe,aAAA;gBAC5E,MAAM,EAAE,OAAA,CAAQ,sBAAA,CACf,EAAE,OAAA,CAAQ,OAAA,CAAQ,iBAAA,CAAkB,qBAAA,CACnC;oBACC;oBACA;oBACA;iBACA,EACD,EAAE,OAAA,CACF,CACD;;iBAEMA,GAAQ;YAChB,4ZAAA,CAAO,KAAA,CAAM,EAAE;YACf,IAAI,aAAa,4OAAA,CAChB,CAAA,OAAO;gBACN,OAAO,EAAE,OAAA;gBACT,MAAM;gBACN,YAAY;aACZ;YAEF,OAAO;gBACN,OAAO;gBACP,MAAM;gBACN,YAAY;aACZ;;;IAGH,IAAI,CAAC,KACJ,CAAA,OAAO;QACN,OAAO;QACP,MAAM;QACN,YAAY;KACZ;IAGF,MAAM,UAAU,MAAM,EAAE,OAAA,CAAQ,eAAA,CAAgB,aAAA,CAAc,KAAK,EAAA,CAAG;IACtE,IAAI,CAAC,QACJ,CAAA,OAAO;QACN,OAAO;QACP,MAAM;QACN,YAAY;KACZ;IAGF,OAAO;QACN,MAAM;YACL;YACA;SACA;QACD,OAAO;QACP;KACA"}},
    {"offset": {"line": 1961, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/.pnpm/better-auth@1.4.9_drizzle-kit@0.31.8_drizzle-orm@0.45.1_@opentelemetry+api@1.9.0_@types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/dist/client/parser.mjs","sources":["file:///Users/aunogarafat/Work/conversation/app/web/node_modules/.pnpm/better-auth%401.4.9_drizzle-kit%400.31.8_drizzle-orm%400.45.1_%40opentelemetry%2Bapi%401.9.0_%40types_2c2f84378f2ef24b1a7bf909953e43a4/node_modules/better-auth/src/client/parser.ts"],"sourcesContent":["const PROTO_POLLUTION_PATTERNS = {\n\tproto:\n\t\t/\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n\tconstructor:\n\t\t/\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n\tprotoShort: /\"__proto__\"\\s*:/,\n\tconstructorShort: /\"constructor\"\\s*:/,\n} as const;\n\nconst JSON_SIGNATURE =\n\t/^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\n\nconst SPECIAL_VALUES = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: undefined,\n\tnan: Number.NaN,\n\tinfinity: Number.POSITIVE_INFINITY,\n\t\"-infinity\": Number.NEGATIVE_INFINITY,\n} as const;\n\nconst ISO_DATE_REGEX =\n\t/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\n\ntype ParseOptions = {\n\t/** Throw errors instead of returning the original value */\n\tstrict?: boolean | undefined;\n\t/** Log warnings when suspicious patterns are detected */\n\twarnings?: boolean | undefined;\n\t/** Custom reviver function */\n\treviver?: ((key: string, value: any) => any) | undefined;\n\t/** Automatically convert ISO date strings to Date objects */\n\tparseDates?: boolean | undefined;\n};\n\nfunction isValidDate(date: Date): boolean {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\n\nfunction parseISODate(value: string): Date | null {\n\tconst match = ISO_DATE_REGEX.exec(value);\n\tif (!match) return null;\n\n\tconst [\n\t\t,\n\t\tyear,\n\t\tmonth,\n\t\tday,\n\t\thour,\n\t\tminute,\n\t\tsecond,\n\t\tms,\n\t\toffsetSign,\n\t\toffsetHour,\n\t\toffsetMinute,\n\t] = match;\n\n\tlet date = new Date(\n\t\tDate.UTC(\n\t\t\tparseInt(year!, 10),\n\t\t\tparseInt(month!, 10) - 1,\n\t\t\tparseInt(day!, 10),\n\t\t\tparseInt(hour!, 10),\n\t\t\tparseInt(minute!, 10),\n\t\t\tparseInt(second!, 10),\n\t\t\tms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0,\n\t\t),\n\t);\n\n\tif (offsetSign) {\n\t\tconst offset =\n\t\t\t(parseInt(offsetHour!, 10) * 60 + parseInt(offsetMinute!, 10)) *\n\t\t\t(offsetSign === \"+\" ? -1 : 1);\n\t\tdate.setUTCMinutes(date.getUTCMinutes() + offset);\n\t}\n\n\treturn isValidDate(date) ? date : null;\n}\n\nfunction betterJSONParse<T = unknown>(\n\tvalue: unknown,\n\toptions: ParseOptions = {},\n): T {\n\tconst {\n\t\tstrict = false,\n\t\twarnings = false,\n\t\treviver,\n\t\tparseDates = true,\n\t} = options;\n\n\tif (typeof value !== \"string\") {\n\t\treturn value as T;\n\t}\n\n\tconst trimmed = value.trim();\n\n\tif (\n\t\ttrimmed.length > 0 &&\n\t\ttrimmed[0] === '\"' &&\n\t\ttrimmed.endsWith('\"') &&\n\t\t!trimmed.slice(1, -1).includes('\"')\n\t) {\n\t\treturn trimmed.slice(1, -1) as T;\n\t}\n\n\tconst lowerValue = trimmed.toLowerCase();\n\tif (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) {\n\t\treturn SPECIAL_VALUES[lowerValue as keyof typeof SPECIAL_VALUES] as T;\n\t}\n\n\tif (!JSON_SIGNATURE.test(trimmed)) {\n\t\tif (strict) {\n\t\t\tthrow new SyntaxError(\"[better-json] Invalid JSON\");\n\t\t}\n\t\treturn value as T;\n\t}\n\n\tconst hasProtoPattern = Object.entries(PROTO_POLLUTION_PATTERNS).some(\n\t\t([key, pattern]) => {\n\t\t\tconst matches = pattern.test(trimmed);\n\t\t\tif (matches && warnings) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`[better-json] Detected potential prototype pollution attempt using ${key} pattern`,\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn matches;\n\t\t},\n\t);\n\n\tif (hasProtoPattern && strict) {\n\t\tthrow new Error(\n\t\t\t\"[better-json] Potential prototype pollution attempt detected\",\n\t\t);\n\t}\n\n\ttry {\n\t\tconst secureReviver = (key: string, value: any) => {\n\t\t\tif (\n\t\t\t\tkey === \"__proto__\" ||\n\t\t\t\t(key === \"constructor\" &&\n\t\t\t\t\tvalue &&\n\t\t\t\t\ttypeof value === \"object\" &&\n\t\t\t\t\t\"prototype\" in value)\n\t\t\t) {\n\t\t\t\tif (warnings) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`[better-json] Dropping \"${key}\" key to prevent prototype pollution`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (parseDates && typeof value === \"string\") {\n\t\t\t\tconst date = parseISODate(value);\n\t\t\t\tif (date) {\n\t\t\t\t\treturn date;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn reviver ? reviver(key, value) : value;\n\t\t};\n\n\t\treturn JSON.parse(trimmed, secureReviver);\n\t} catch (error) {\n\t\tif (strict) {\n\t\t\tthrow error;\n\t\t}\n\t\treturn value as T;\n\t}\n}\n\nexport function parseJSON<T = unknown>(\n\tvalue: unknown,\n\toptions: ParseOptions = { strict: true },\n): T {\n\treturn betterJSONParse<T>(value, options);\n}\n"],"names":["value"],"mappings":"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"}}]
}